```json
{
  "domain": "facturationAppel",
  "domainPascal": "FacturationAppel",
  "complexity": "MEDIUM",
  "entities": [
    {
      "name": "HistoriqueAppel",
      "fields": [
        {
          "name": "societe",
          "type": "string",
          "source": "historique_pabx.societe",
          "nullable": false
        },
        {
          "name": "dateAppel",
          "type": "Date",
          "source": "historique_pabx.date_appel",
          "nullable": false
        },
        {
          "name": "heureAppel",
          "type": "string",
          "source": "historique_pabx.heure_appel",
          "nullable": false
        },
        {
          "name": "numeroTel",
          "type": "string",
          "source": "historique_pabx.numero_tel",
          "nullable": false
        },
        {
          "name": "duree",
          "type": "string",
          "source": "historique_pabx.duree",
          "nullable": false
        },
        {
          "name": "montant",
          "type": "number",
          "source": "historique_pabx.montant",
          "nullable": false
        },
        {
          "name": "qualite",
          "type": "string",
          "source": "historique_pabx.qualite",
          "nullable": true
        },
        {
          "name": "gratuite",
          "type": "boolean",
          "source": "historique_pabx.gratuite",
          "nullable": false
        },
        {
          "name": "raisonGratuite",
          "type": "string",
          "source": "historique_pabx.raison_gratuite",
          "nullable": true
        }
      ]
    },
    {
      "name": "CoefTelephone",
      "fields": [
        {
          "name": "coefficient",
          "type": "number",
          "source": "coef__telephone__coe.coeff_tel",
          "nullable": false
        },
        {
          "name": "societe",
          "type": "string",
          "source": "coef__telephone__coe.societe",
          "nullable": false
        }
      ]
    },
    {
      "name": "ReseauCloture",
      "fields": [
        {
          "name": "clotureEnCours",
          "type": "boolean",
          "source": "reseau_cloture___rec.cloture_en_cours",
          "nullable": false
        },
        {
          "name": "testReseau",
          "type": "string",
          "source": "reseau_cloture___rec.test_reseau",
          "nullable": false
        }
      ]
    }
  ],
  "stateFields": [
    {
      "name": "historiquesAppels",
      "type": "HistoriqueAppel[]",
      "default": "[]"
    },
    {
      "name": "coefficientTelephone",
      "type": "number | null",
      "default": "null"
    },
    {
      "name": "clotureEnCours",
      "type": "boolean",
      "default": "false"
    },
    {
      "name": "testReseau",
      "type": "string",
      "default": "''"
    },
    {
      "name": "isLoading",
      "type": "boolean",
      "default": "false"
    },
    {
      "name": "error",
      "type": "string | null",
      "default": "null"
    },
    {
      "name": "filters",
      "type": "{ dateDebut?: Date; dateFin?: Date; numeroTel?: string }",
      "default": "{}"
    }
  ],
  "actions": [
    {
      "name": "chargerHistoriquesAppels",
      "params": [
        "societe: string",
        "dateDebut?: Date",
        "dateFin?: Date"
      ],
      "businessRules": [
        "Charger les appels pour la période spécifiée",
        "Filtrer par société",
        "Trier par date et heure décroissant"
      ],
      "returns": "Promise<void>"
    },
    {
      "name": "recupererCoefficient",
      "params": [
        "societe: string"
      ],
      "businessRules": [
        "Récupérer le coefficient téléphone pour la société",
        "Utiliser pour calcul du montant facturation"
      ],
      "returns": "Promise<number>"
    },
    {
      "name": "verifierClotureEnCours",
      "params": [
        "societe: string"
      ],
      "businessRules": [
        "Vérifier si une clôture est en cours",
        "Bloquer les opérations si clôture active"
      ],
      "returns": "Promise<boolean>"
    },
    {
      "name": "debloquerCloture",
      "params": [
        "societe: string"
      ],
      "businessRules": [
        "Débloquer une clôture en cours",
        "Mettre à jour le statut réseau"
      ],
      "returns": "Promise<void>"
    },
    {
      "name": "creerFactureAppel",
      "params": [
        "appel: HistoriqueAppel",
        "typeCompte: 'GO' | 'GM'"
      ],
      "businessRules": [
        "RM-001: Si > GO alors type='GO' sinon type='GM'",
        "Créer une opération débit pour l'appel",
        "Appliquer le coefficient téléphone",
        "Gérer les appels gratuits (montant = 0)"
      ],
      "returns": "Promise<void>"
    },
    {
      "name": "marquerAppelGratuit",
      "params": [
        "appelId: number",
        "raison: string"
      ],
      "businessRules": [
        "Marquer l'appel comme gratuit",
        "Enregistrer la raison de gratuité",
        "Ne pas créer d'opération débit"
      ],
      "returns": "Promise<void>"
    }
  ],
  "apiEndpoints": [
    {
      "method": "GET",
      "path": "/api/facturation-appel/historiques",
      "queryParams": [
        "societe",
        "dateDebut?",
        "dateFin?",
        "numeroTel?"
      ],
      "response": "HistoriqueAppel[]"
    },
    {
      "method": "GET",
      "path": "/api/facturation-appel/coefficient/{societe}",
      "queryParams": [],
      "response": "CoefTelephone"
    },
    {
      "method": "GET",
      "path": "/api/facturation-appel/cloture-status/{societe}",
      "queryParams": [],
      "response": "{ clotureEnCours: boolean; testReseau: string }"
    },
    {
      "method": "POST",
      "path": "/api/facturation-appel/debloquer-cloture",
      "queryParams": [
        "societe"
      ],
      "response": "{ success: boolean }"
    },
    {
      "method": "POST",
      "path": "/api/facturation-appel/creer-facture",
      "queryParams": [],
      "response": "{ success: boolean; operationId?: number }"
    },
    {
      "method": "PATCH",
      "path": "/api/facturation-appel/marquer-gratuit/{appelId}",
      "queryParams": [],
      "response": "{ success: boolean }"
    }
  ],
  "uiLayout": {
    "type": "data-list-page",
    "sections": [
      {
        "name": "filters",
        "controls": [
          "DateRangePicker (dateDebut, dateFin)",
          "TextInput (numeroTel)",
          "Button (Rechercher)"
        ]
      },
      {
        "name": "appelsList",
        "controls": [
          "DataGrid avec colonnes: dateAppel, heureAppel, numeroTel, duree, montant, qualite, gratuite",
          "Actions par ligne: Facturer, Marquer gratuit",
          "Indicateur si clôture en cours"
        ]
      },
      {
        "name": "facturationPanel",
        "controls": [
          "RadioGroup (Type compte: GO/GM)",
          "TextInput (Montant calculé - readonly)",
          "Checkbox (Appel gratuit)",
          "TextInput (Raison gratuité - si gratuit)",
          "Button (Confirmer facturation)"
        ]
      },
      {
        "name": "statusBar",
        "controls": [
          "Label (Coefficient téléphone actuel)",
          "Label (Statut clôture)",
          "Button (Débloquer clôture - si clôture active)"
        ]
      }
    ]
  },
  "mockData": {
    "count": 10,
    "description": "10 appels téléphoniques sur 3 jours avec différents numéros, durées variées (30s à 15min), montants calculés (0.50€ à 8.00€), 2 appels gratuits avec raisons (erreur facturation, appel service)"
  },
  "dependencies": {
    "stores": [
      "useParametresStore (pour société courante)",
      "useSessionStore (pour opérateur courant)",
      "useTransactionStore (pour création OD)"
    ],
    "sharedTypes": [
      "Transaction",
      "OperationDetails"
    ],
    "externalApis": [
      "Test reseau (ADH IDE 18)",
      "Test si cloture en cours (ADH IDE 19)",
      "Deblocage compte GM (ADH IDE 17)",
      "Creation O.D (ADH IDE 16)"
    ]
  }
}
```