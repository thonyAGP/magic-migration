Review the generated code against the original specification.

Produce a JSON report:
```json
{
  "programId": 0,
  "programName": "",
  "coveragePct": 0,
  "rulesImplemented": 0,
  "rulesTotal": 0,
  "missingRules": [
    "rule descriptions not implemented"
  ],
  "recommendations": [
    "improvement suggestions"
  ]
}
```

Check:
1. Every business rule from the contract is implemented in the store
2. Every table from the contract has corresponding entity types
3. Every API endpoint is wired to the store
4. UI layout matches the spec description
5. Error handling is present for all actions

CONTRACT RULES:
[
  {
    "id": "RM-001",
    "description": "Negation de (v. ok [F]) (condition inversee)",
    "condition": "NOT (v. ok [F])",
    "variables": [
      "ES"
    ],
    "status": "IMPL",
    "targetFile": "adh-web/src/stores/saisieContenuCaisseStore.ts",
    "gapNotes": ""
  }
]

SPEC EXCERPT:
﻿# ADH IDE 68 - Saisie date

> **Analyse**: Phases 1-4 2026-02-07 03:43 -> 02:02 (22h18min) | Assemblage 02:02
> **Pipeline**: V7.2 Enrichi
> **Structure**: 4 onglets (Resume | Ecrans | Donnees | Connexions)

<!-- TAB:Resume -->

## 1. FICHE D'IDENTITE

| Attribut | Valeur |
|----------|--------|
| Projet | ADH |
| IDE Position | 68 |
| Nom Programme | Saisie date |
| Fichier source | `Prg_68.xml` |
| Dossier IDE | General |
| Taches | 1 (1 ecrans visibles) |
| Tables modifiees | 0 |
| Programmes appeles | 1 |
| Complexite | **BASSE** (score 5/100) |

## 2. DESCRIPTION FONCTIONNELLE

**Saisie date** assure la gestion complete de ce processus, accessible depuis [Print extrait DateImp /O (IDE 74)](ADH-IDE-74.md).

Le flux de traitement s'organise en **1 blocs fonctionnels** :

- **Saisie** (1 tache) : ecrans de saisie utilisateur (formulaires, champs, donnees)

**Logique metier** : 1 regles identifiees couvrant conditions metier.

## 3. BLOCS FONCTIONNELS

### 3.1 Saisie (1 tache)

L'operateur saisit les donnees de la transaction via 1 ecran (Saisie dates).

---

#### <a id="t1"></a>68 - Saisie dates [[ECRAN]](#ecran-t1)

**Role** : Saisie des donnees : Saisie dates.
**Ecran** : 533 x 92 DLU (MDI) | [Voir mockup](#ecran-t1)


## 5. REGLES METIER

1 regles identifiees:

### Autres (1 regles)

#### <a id="rm-RM-001"></a>[RM-001] Negation de (v. ok [F]) (condition inversee)

| Element | Detail |
|---------|--------|
| **Condition** | `NOT (v. ok [F])` |
| **Si vrai** | Action si vrai |
| **Variables** | ES (v. ok) |
| **Expression source** | Expression 9 : `NOT (v. ok [F])` |
| **Exemple** | Si NOT (v. ok [F]) â†’ Action si vrai |

## 6. CONTEXTE

- **Appele par**: [Print extrait DateImp /O (IDE 74)](ADH-IDE-74.md)
- **Appelle**: 1 programmes | **Tables**: 0 (W:0 R:0 L:0) | **Taches**: 1 | **Expressions**: 10

<!-- TAB:Ecrans -->

## 8. ECRANS

### 8.1 Forms visibles (1 / 1)

| # | Position | Tache | Nom | Type | Largeur | Hauteur | Bloc |
|---|----------|-------|-----|------|---------|---------|------|
| 1 | 68 | 68 | Saisie dates | MDI | 533 | 92 | Saisie |

### 8.2 Mockups Ecrans

---

#### <a id="ecran-t1"></a>68 - Saisie dates
**Tache** : [68](#t1) | **Type** : MDI | **Dimensions** : 533 x 92 DLU
**Bloc** : Saisie | **Titre IDE** : Saisie dates

<!-- FORM-DATA:
{
    "width":  533,
    "vFactor":  8,
    "type":  "MDI",
    "hFactor":  8,
    "controls":  [
                     {
                         "x":  0,
                         "type":  "label",
                         "var":  "",
                         "y":  0,
                         "w":  533,
                         "fmt":  "",
                         "name":  "",
                         "h":  18,
                         "color":  "",
                         "text":  "",
                         "parent":  null
                     },
                     {
                         "x":  158,
                         "type":  "label",
                         "var":  "",
                         "y":  28,
                         "w":  127,
                         "fmt":  "",
                         "name":  "",
                         "h":  8,
                         "color":  "4",
                         "text":  "Du",
                         "parent":  null
                     },
                     {
                         "x":  157,
                         "type":  "label",
                         "var":  "",
                         "y":  46,
                         "w":  127,
                         "fmt":  "",
                         "name":  "",
                         "h":  8,
                         "color":  "4",
                         "text":  "Au",
                         "parent":  null
                     },
                     {
                         "x":  0,
                         "type":  "label",
                         "var":  "",
                         "y":  68,
                         "w":  531,
                         "fmt":  "",
                         "name":  "",
                         "h":  24,
                         "color":  "",
                         "text":  "",
                         "parent":  null
                     },
                     {
                         "x":  306,
                         "type":  "edit",
                         "var":  "",
                         "y":  27,
                         "w":  126,
                         "fmt":  "DD/MM/YYYYA",
                         "name":  "v.date Min",
                         "h":  10,
                         "color":  "6",
                         "text":  "",
                         "parent":  null
                     },
                     {
                         "x":  305,
                         "type":  "edit",
                         "var":  "",
                         "y":  45,
                     

GENERATED FILES:

--- types/saisieDate.ts ---
export interface DateRange {
  dateMin: Date | null;
  dateMax: Date | null;
}

export interface SaisieDate {
  dateMin: Date | null;
  dateMax: Date | null;
  isValid: boolean;
  errorMessage: string | null;
}

export interface SaisieDateState {
  dateMin: Date | null;
  dateMax: Date | null;
  isValid: boolean;
  errorMessage: string | null;
  setDateMin: (date: Date | null) => void;
  setDateMax: (date: Date | null) => void;
  validateDates: () => boolean;
  submitDates: () => Promise<DateRange | null>;
  cancel: () => void;
  reset: () => void;
}

export interface GetTitreResponse {
  titre: string;
}

export type SaisieDateRequest = DateRange;

export type SaisieDateResponse = DateRange;

--- stores/saisieDateStore.ts ---
import { create } from 'zustand';
import type {
  DateRange,
  SaisieDateState,
  GetTitreResponse,
} from '@/types/saisieDate';
import { useDataSourceStore } from './dataSourceStore';
import { apiClient } from '@/services/api/apiClient';

const initialState: Omit<SaisieDateState, 'setDateMin' | 'setDateMax' | 'validateDates' | 'submitDates' | 'cancel' | 'reset'> = {
  dateMin: null,
  dateMax: null,
  isValid: false,
  errorMessage: null,
};

export const useSaisieDateStore = create<SaisieDateState>()((set, get) => ({
  ...initialState,

  setDateMin: (date) => {
    set({ dateMin: date });
    get().validateDates();
  },

  setDateMax: (date) => {
    set({ dateMax: date });
    get().validateDates();
  },

  validateDates: () => {
    const { dateMin, dateMax } = get();

    if (!dateMin && !dateMax) {
      set({ isValid: false, errorMessage: 'Au moins une date doit être saisie' });
      return false;
    }

    if (dateMin && dateMax && dateMin > dateMax) {
      set({ isValid: false, errorMessage: 'La date minimum doit être inférieure ou égale à la date maximum' });
      return false;
    }

    set({ isValid: true, errorMessage: null });
    return true;
  },

  submitDates: async () => {
    const { dateMin, dateMax, validateDates } = get();

    if (!validateDates()) {
      return null;
    }

    const { isRealApi } = useDataSourceStore.getState();

    if (!isRealApi) {
      return { dateMin, dateMax };
    }

    try {
      const response = await apiClient.post<DateRange>('/api/saisie-date/submit', {
        dateMin,
        dateMax,
      });

      if (!response.data.success) {
        set({ errorMessage: response.data.error ?? 'Erreur lors de la soumission' });
        return null;
      }

      return response.data.data ?? { dateMin, dateMax };
    } catch (e: unknown) {
      const message = e instanceof Error ? e.message : 'Erreur lors de la soumission des dates';
      set({ errorMessage: message });
      return null;
    }
  },

  cancel: 

--- services/api/endpoints-saisieDate.ts ---
import { apiClient, type ApiResponse } from './apiClient';
import type { GetTitreResponse } from '@/types/saisieDate';

export const saisieeDateApi = {
  getTitre: () =>
    apiClient.get<ApiResponse<GetTitreResponse>>(
      '/api/saisie-date/titre',
    ),
};

--- pages/SaisieDatePage.tsx ---
import { useState, useEffect, useCallback } from 'react';
import { useNavigate } from 'react-router-dom';
import { ScreenLayout } from '@/components/layout';
import { Button, Dialog, Input } from '@/components/ui';
import { useSaisieDateStore, getTitre } from '@/stores/saisieDateStore';
import { useAuthStore } from '@/stores';
import { cn } from '@/lib/utils';

export function SaisieDatePage() {
  const navigate = useNavigate();
  const user = useAuthStore((s) => s.user);

  const dateMin = useSaisieDateStore((s) => s.dateMin);
  const dateMax = useSaisieDateStore((s) => s.dateMax);
  const isValid = useSaisieDateStore((s) => s.isValid);
  const errorMessage = useSaisieDateStore((s) => s.errorMessage);
  const setDateMin = useSaisieDateStore((s) => s.setDateMin);
  const setDateMax = useSaisieDateStore((s) => s.setDateMax);
  const submitDates = useSaisieDateStore((s) => s.submitDates);
  const cancel = useSaisieDateStore((s) => s.cancel);
  const reset = useSaisieDateStore((s) => s.reset);

  const [titre, setTitre] = useState('Saisie dates');
  const [isSubmitting, setIsSubmitting] = useState(false);
  const [showDialog, setShowDialog] = useState(true);

  useEffect(() => {
    getTitre().then(setTitre);
    return () => reset();
  }, [reset]);

  const handleDateMinChange = useCallback(
    (e: React.ChangeEvent<HTMLInputElement>) => {
      const value = e.target.value;
      setDateMin(value ? new Date(value) : null);
    },
    [setDateMin],
  );

  const handleDateMaxChange = useCallback(
    (e: React.ChangeEvent<HTMLInputElement>) => {
      const value = e.target.value;
      setDateMax(value ? new Date(value) : null);
    },
    [setDateMax],
  );

  const handleSubmit = useCallback(async () => {
    setIsSubmitting(true);
    const result = await submitDates();
    setIsSubmitting(false);

    if (result) {
      setShowDialog(false);
      navigate('/caisse/menu');
    }
  }, [submitDates, navigate]);

  const handleCancel = useCallback(() => {
    canc

--- components/caisse/saisieDate/DateInputsPanel.tsx ---
import type { FC, ChangeEvent } from 'react';
import { cn } from '@/lib/utils';

interface DateInputsPanelProps {
  dateMin: Date | null;
  dateMax: Date | null;
  onDateMinChange: (e: ChangeEvent<HTMLInputElement>) => void;
  onDateMaxChange: (e: ChangeEvent<HTMLInputElement>) => void;
  className?: string;
}

export const DateInputsPanel: FC<DateInputsPanelProps> = ({
  dateMin,
  dateMax,
  onDateMinChange,
  onDateMaxChange,
  className,
}) => {
  const formatDateForInput = (date: Date | null): string => {
    if (!date) return '';
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, '0');
    const day = String(date.getDate()).padStart(2, '0');
    return `${year}-${month}-${day}`;
  };

  return (
    <div className={cn('flex items-center gap-4', className)}>
      <label htmlFor="date-min" className="text-sm font-medium">
        Du
      </label>
      <input
        id="date-min"
        type="date"
        value={formatDateForInput(dateMin)}
        onChange={onDateMinChange}
        className="rounded border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"
      />
      <label htmlFor="date-max" className="text-sm font-medium">
        Au
      </label>
      <input
        id="date-max"
        type="date"
        value={formatDateForInput(dateMax)}
        onChange={onDateMaxChange}
        className="rounded border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"
      />
    </div>
  );
};

--- components/caisse/saisieDate/FooterPanel.tsx ---
import { Button } from '@/components/ui';
import { cn } from '@/lib/utils';

interface FooterPanelProps {
  onSubmit: () => void;
  onCancel: () => void;
  isSubmitting?: boolean;
  isValid?: boolean;
  className?: string;
}

export const FooterPanel = ({
  onSubmit,
  onCancel,
  isSubmitting = false,
  isValid = true,
  className,
}: FooterPanelProps) => {
  return (
    <div
      className={cn(
        'flex items-center justify-end gap-2 border-t bg-gray-50 px-4 py-3',
        className,
      )}
    >
      <Button
        variant="primary"
        onClick={onSubmit}
        disabled={!isValid || isSubmitting}
      >
        {isSubmitting ? 'En cours...' : 'OK'}
      </Button>
      <Button variant="secondary" onClick={onCancel} disabled={isSubmitting}>
        Abandonner
      </Button>
    </div>
  );
};

--- components/caisse/saisieDate/HeaderPanel.tsx ---
import type { ReactNode } from 'react';
import { cn } from '@/lib/utils';

interface HeaderPanelProps {
  titre: string;
  currentDate?: Date;
  className?: string;
  children?: ReactNode;
}

export const HeaderPanel = ({ titre, currentDate, className, children }: HeaderPanelProps) => {
  const formattedDate = currentDate
    ? currentDate.toLocaleDateString('fr-FR', {
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: 'numeric',
      })
    : '';

  return (
    <div className={cn('flex flex-col gap-3 border-b border-gray-200 pb-4', className)}>
      <div className="flex items-center justify-between">
        <h1 className="text-2xl font-semibold text-gray-900">{titre}</h1>
        {currentDate && (
          <div className="text-sm text-gray-600 font-medium">{formattedDate}</div>
        )}
      </div>
      {children}
    </div>
  );
};