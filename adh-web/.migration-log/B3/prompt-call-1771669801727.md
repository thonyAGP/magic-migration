Generate a React page component for the "RecapFermeture" domain.

RULES (MANDATORY):
- Use import aliases: @/ for src root (e.g. @/stores/..., @/types/...)
- NEVER use `any` type - use `unknown` or precise types
- Tailwind v4 classes for styling (no tailwind.config.js)
- Arrow functions everywhere (no function declarations)
- `as const` instead of TypeScript enum
- verbatimModuleSyntax is enabled: use `import type { X }` ONLY for types/interfaces, use `import { X }` for values/consts
- File must be COMPLETE and ready to write - NO placeholders, NO TODOs, NO "// implement here"
- NO comments except for genuinely complex logic
- Output ONLY the code inside a single markdown code block (```typescript ... ``` or ```tsx ... ```)

SHARED INFRASTRUCTURE (use these exact imports):
- Data source toggle: `import { useDataSourceStore } from "@/stores/dataSourceStore"` (has .getState().isRealApi)
- API client: `import { apiClient } from "@/services/api/apiClient"` and `import type { ApiResponse } from "@/services/api/apiClient"`
- Screen layout: `import { ScreenLayout } from "@/components/layout"` (wrapper with sidebar, takes children + className)
- UI components: `import { Button, Dialog, Input } from "@/components/ui"`
- cn utility: `import { cn } from "@/lib/utils"`

PAGE REQUIREMENTS:
- Use store via useRecapFermetureStore()
- Destructure 20+ fields from store
- useCallback for event handlers
- useEffect for init + cleanup (call reset on unmount)
- ScreenLayout wrapper from @/components/layout (import { ScreenLayout } from "@/components/layout")
- ScreenLayout takes children + className props (no title prop)
- Tailwind v4 classes for styling
- Handle loading, error, and empty states

UI LAYOUT:
{
  "type": "report-page",
  "sections": [
    {
      "name": "header",
      "controls": [
        "sessionInfo",
        "dateHeureDebut",
        "deviseLocale",
        "printControls"
      ]
    },
    {
      "name": "tableauRecap",
      "controls": [
        "gridLignesRecap",
        "colonnesDevises",
        "totauxParDevise",
        "ecartsDetectes"
      ]
    },
    {
      "name": "remises",
      "controls": [
        "gridRemises",
        "montantRemiseMonnaie",
        "flagsEdition"
      ]
    },
    {
      "name": "articles",
      "controls": [
        "gridArticles",
        "totalArticles"
      ]
    },
    {
      "name": "footer",
      "controls": [
        "totauxGeneraux",
        "validationIntegrite",
        "exportButtons"
      ]
    }
  ]
}

STORE INTERFACE (actions and state available):
import { create } from 'zustand';
import type {
  RecapFermeture,
  LigneRecap,
  RemiseEnCaisse,
  ArticleSession,
  LoadRecapFermetureResponse,
  CalculerEquivalentRequest,
  CalculerEquivalentResponse,
  SaveRemiseRequest,
  SaveDiscountRequest,
  SetModeReimpressionRequest,
  CheckPrinterRequest,
  GenererTableauRequest,
} from '@/types/recapFermeture';
import { useDataSourceStore } from '@/stores/dataSourceStore';
import { apiClient } from '@/services/api/apiClient';
import type { ApiResponse } from '@/services/api/apiClient';

interface RecapFermetureState {
  recap: RecapFermeture | null;
  lignesRecap: LigneRecap[];
  remises: RemiseEnCaisse[];
  articles: ArticleSession[];
  isLoading: boolean;
  error: string | null;
  isPrinting: boolean;
  modeReimpression: 'D' | 'G' | null;
  printerCourant: number | null;
  finTache: boolean;
}

interface RecapFermetureActions {
  loadRecapFermeture: (societe: string, session: number) => Promise<void>;
  genererTableau: (societe: string, session: number) => Promise<void>;
  calculerEquivalent: (
    montant: number,
    deviseSource: string,
    deviseCible: string,
  ) => Promise<number>;
  saveRemise: (remise: RemiseEnCaisse) => Promise<void>;
  saveDiscount: (discount: SaveDiscountRequest) => Promise<void>;
  setModeReimpression: (mode: 'D' | 'G' | null) => Promise<void>;
  checkPrinter: (printerNum: number) => Promise<boolean>;
  exportRecap: (format: 'PDF' | 'EXCEL') => Promise<Blob>;
  setIsLoading: (isLoading: boolean) => void;
  setError: (error: string | null) => void;
  setIsPrinting: (isPrinting: boolean) => void;
  setPrinterCourant: (printerNum: number | null) => void;
  setFinTache: (finTache: boolean) => void;
  reset: () => void;
}

type RecapFermetureStore = RecapFermetureState & RecapFermetureActions;

const MOCK_RECAP: RecapFermeture = {
  societe: 'SOC1',
  session: 42,
  deviseLocale: 'EUR',
  dateDebut: new Date('2026-02-10T08:00:00'),
  heureDebut: '08:00',
  nbreDeviseOuverture: 3,
  nbreDeviseFermeture: 3,
  nbreDevisesCalcule: 3,
  nbreDevisesCompte: 3,
};

const MOCK_LIGNES: LigneRecap[] = [
  {
    typeOperation: 'Ventes boutique',
    montantDevise: 1245.50,
    codeDevise: 'EUR',
    tauxChange: null,
    montantEquivalent: 1245.50,
    ecart: null,
  },
  {
    typeOperation: 'Change USD',
    montantDevise: 850.00,
    codeDevise: 'USD',
    tauxChange: 0.92,
    montantEquivalent: 782.00,
    ecart: 2.50,
  },
  {
    typeOperation: 'Change GBP',
    montantDevise: 320.00,
    codeDevise: 'GBP',
    tauxChange: 1.18,
    montantEquivalent: 377.60,
    ecart: null,
  },
  {
    typeOperation: 'Remises espèces',
    montantDevise: -450.00,
    codeDevise: 'EUR',
    tauxChange: null,
    montantEquivalent: -450.00,
    ecart: null,
  },
  {
    typeOperation: 'Cartes bancaires',
    montantDevise: 2340.00,
    codeDevise: 'EUR',
    tauxChange: null,
    montantEquivalent: 2340.00,
    ecart: null,
  },
  {
    typeOperation: 'GiftPass utilisés',
    montantDevise: 680

TYPES:
import type { Session } from '@/types/session';
import type { Devise } from '@/types/devise';

export interface RecapFermeture {
  societe: string;
  session: number;
  deviseLocale: string;
  dateDebut: Date;
  heureDebut: string;
  nbreDeviseOuverture: number;
  nbreDeviseFermeture: number;
  nbreDevisesCalcule: number;
  nbreDevisesCompte: number;
}

export interface LigneRecap {
  typeOperation: string;
  montantDevise: number;
  codeDevise: string;
  tauxChange: number | null;
  montantEquivalent: number;
  ecart: number | null;
}

export interface RemiseEnCaisse {
  detailProduitRemiseEdite: boolean;
  montantRemiseMonnaie: number;
  detailRemiseFinaleEdite: boolean;
}

export interface ArticleSession {
  chronoHisto: number;
  totalArticles: number;
  codeArticle: string;
  libelleArticle: string;
}

export interface RecapFermetureState {
  recap: RecapFermeture | null;
  lignesRecap: LigneRecap[];
  remises: RemiseEnCaisse[];
  articles: ArticleSession[];
  isLoading: boolean;
  error: string | null;
  isPrinting: boolean;
  modeReimpression: 'D' | 'G' | null;
  printerCourant: number | null;
  finTache: boolean;
}

export interface LoadRecapFermetureRequest {
  societe: string;
  session: number;
}

export interface LoadRecapFermetureResponse {
  recap: RecapFermeture;
  lignesRecap: LigneRecap[];
  remises: RemiseEnCaisse[];
  articles: ArticleSession[];
}

export interface GenererTableauRequest {
  societe: string;
  session: number;
}

export interface GenererTableauResponse {
  success: boolean;
  documentUrl?: string;
}

export interface CalculerEquivalentRequest {
  montant: number;
  deviseSource: string;
  deviseCible: string;
}

export interface CalculerEquivalentResponse {
  montantEquivalent: number;
}

export interface SaveRemiseRequest {
  detailProduitRemiseEdite: boolean;
  montantRemiseMonnaie: number;
  detailRemiseFinaleEdite: boolean;
}

export interface SaveRemiseResponse {
  success: boolean;
}

export interface SaveDiscountRequest {
  [key: string]: unknown;
}

export interface SaveDiscountResponse {
  success: boolean;
}

export interface SetModeReimpressionRequest {
  mode: 'D' | 'G' | null;
}

export interface SetModeReimpressionResponse {
  success: boolean;
}

export interface CheckPrinterRequest {
  printerNum: number;
}

export interface CheckPrinterResponse {
  available: boolean;
}

export interface ExportRecapRequest {
  format: 'PDF' | 'EXCEL';
}

export interface RecapFermetureActions {
  loadRecapFermeture: (
    societe: string,
    session: number
  ) => Promise<void>;
  
  genererTableau: (
    societe: string,
    session: number
  ) => Promise<void>;
  
  calculerEquivalent: (
    montant: number,
    deviseSource: string,
    deviseCible: string
  ) => Promise<number>;
  
  saveRemise: (
    remise: RemiseEnCaisse
  ) => Promise<void>;
  
  saveDiscount: (
    discount: unknown
  ) => Promise<void>;
  
  setModeReimpression: (
    mode: 'D' | 'G' | null
  ) => Promise<void>;
  
  checkPrinter: (
    printerNum: number
  ) => Promise<boolean>;
  
  exportRecap: (
    format: 'PDF' | 'EXCEL'
  ) => Promise<Blob>;
  
  setIsLoading: (isLoading: boolean) => void;
  setError: (error: string | null) => void;
  setIsPrinting: (isPrinting: boolean) => void;
  setPrinterCourant: (printerNum: number | null) => void;
  setFinTache: (finTache: boolean) => void;
  reset: () => void;
}

SPEC UI DESCRIPTION:
> **Structure**: 4 onglets (Resume | Ecrans | Donnees | Connexions)
| Taches | 93 (0 ecrans visibles) |
Le flux d'impression est centralisé : le programme récupère le titre de la session (IDE 43), sélectionne l'imprimante active via IDE 180, configure le numéro de listing (IDE 181) et initialise les paramètres d'impression (IDE 182). Ces appels séquentiels garantissent que le bon périphérique et le bon format sont utilisés avant génération du rapport.
<!-- TAB:Ecrans -->
## 8. ECRANS
*(Programme sans ecran visible)*
    INIT[Init controles]
| Ecrans visibles | 0 | Ecran unique ou traitement batch |

REFERENCE PATTERN:
```tsx
import { useState, useEffect, useCallback } from 'react';
import { useNavigate } from 'react-router-dom';
import { ScreenLayout } from '@/components/layout';
import {
  ExtraitAccountSelector,
  ExtraitTransactionGrid,
  ExtraitFormatDialog,
} from '@/components/caisse/extrait';
import { EmailSendDialog } from '@/components/caisse/dialogs';
import { useExtraitStore } from '@/stores/extraitStore';
import { useAuthStore } from '@/stores';
import type { ExtraitAccountInfo, ExtraitPrintFormat } from '@/types/extrait';

type Phase = 'search' | 'extrait';

export function ExtraitPage() {
  const navigate = useNavigate();
  const user = useAuthStore((s) => s.user);
  const societe = 'ADH';

  const selectedAccount = useExtraitStore((s) => s.selectedAccount);
  const transactions = useExtraitStore((s) => s.transactions);
  const summary = useExtraitStore((s) => s.summary);
  const searchResults = useExtraitStore((s) => s.searchResults);
  const isSearching = useExtraitStore((s) => s.isSearching);
  const isLoadingExtrait = useExtraitStore((s) => s.isLoadingExtrait);
  const isPrinting = useExtraitStore((s) => s.isPrinting);
  const error = useExtraitStore((s) => s.error);
  const searchAccount = useExtraitStore((s) => s.searchAccount);
  const selectAccount = useExtraitStore((s) => s.selectAccount);
  const loadExtrait = useExtraitStore((s) => s.loadExtrait);
  const printExtrait = useExtraitStore((s) => s.printExtrait);
  const reset = useExtraitStore((s) => s.reset);

  const [phase, setPhase] = useState<Phase>('search');
  const [showFormatDialog, setShowFormatDialog] = useState(false);
  const [showEmailDialog, setShowEmailDialog] = useState(false);

  useEffect(() => {
    return () => reset();
  }, [reset]);

  const handleSelectAccount = useCallback(
    (account: ExtraitAccountInfo) => {
      selectAccount(account);
      loadExtrait(societe, account.codeAdherent, account.filiation);
      setPhase('extrait');
    },
    [selectAccount, loadExtrait, societe],
  );

  const handlePrintFormat = useCallback(
    async (format: ExtraitPrintFormat) => {
      if (!selectedAccount) return;
      await printExtrait(
        societe,
        selectedAccount.codeAdherent,
        selectedAccount.filiation,
        format,
      );
      setShowFormatDialog(false);
    },
    [selectedAccount, printExtrait, societe],
  );

  const handleBack = () => {
    if (phase === 'extrait') {
      reset();
      setPhase('search');
    } else {
      navigate('/caisse/menu');
    }
  };

  return (
    <ScreenLayout>
      <div className="space-y-6 max-w-4xl mx-auto">
        <div className="flex items-center justify-between">
          <div>
            <h2 className="text-xl font-semibold">Extrait de compte</h2>
            <p className="text-on-surface-muted text-sm mt-1">
              {phase === 'search'
                ? 'Rechercher un compte adherent'
                : `Compte: ${selectedAccount?.nom} ${selectedAccount?.prenom} #${selectedAccount?.codeAdherent}`}
            </p>
          </div>
          {user && (
            <span className="text-xs text-on-surface-muted">
              {user.prenom} {user.nom}
            </span>
          )}
        </div>

        {error && (
          <div className="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md text-sm">
            {error}
          </div>
        )}

        {phase === 'search' && (
          <>
            <ExtraitAccountSelector
              onSelect={handleSelectAccount}
              onSearch={(q) => searchAccount(societe, q)}
              searchResults={searchResults}
              isSearching={isSearching}
              isLoading={isLoadingExtrait}
            />
            <div className="flex justify-start">
              <button
                onClick={handleBack}
                className="px-4 py-2 border border-border rounded-md text-on-surface hover:bg-surface-hover"
              >
                Retour au menu
              </button>
            </div>
          </>
        )}

        {phase === 'extrait' && (
          <>
            <ExtraitTransactionGrid
              transactions={transactions}
              summary={summary}
              isLoading={isLoadingExtrait}
            />

            <div className="flex gap-3 justify-between">
              <button
                onClick={handleBack}
                className="px-4 py-2 border border-border rounded-md text-on-surface hover:bg-surface-hover"
              >
                Nouvelle recherche
              </button>
              <div className="flex gap-3">
                <button
                  onClick={() => setShowEmailDialog(true)}
                  className="px-4 py-2 border border-border rounded-md text-on-surface hover:bg-surface-hover"
                >
                  Envoyer par email
                </button>
                <button
                  onClick={() => setShowFormatDialog(true)}
                  className="px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark"
                >
                  Imprimer
                </button>
              </div>
            </div>

            <ExtraitFormatDialog
              open={showFormatDialog}
              onClose={() => setShowFormatDialog(false)}
              onSelectFormat={handlePrintFormat}
              isPrinting={isPrinting}
            />

            <EmailSendDialog
              open={showEmailDialog}
              onClose={() => setShowEmailDialog(false)}
              documentType="extrait"
              documentId={selectedAccount ? String(selectedAccount.codeAdherent) : ''}
            />
          </>
        )}
      </div>
    </ScreenLayout>
  );
}

```