```tsx
import { useEffect, useCallback } from 'react';
import { useNavigate } from 'react-router-dom';
import { ScreenLayout } from '@/components/layout';
import { useFidelisationRemiseStore } from '@/stores/fidelisationRemiseStore';
import { useAuthStore } from '@/stores';
import { cn } from '@/lib/utils';

export function FidelisationRemisePage() {
  const navigate = useNavigate();
  const user = useAuthStore((s) => s.user);

  const isLoading = useFidelisationRemiseStore((s) => s.isLoading);
  const error = useFidelisationRemiseStore((s) => s.error);
  const remiseData = useFidelisationRemiseStore((s) => s.remiseData);
  const remiseResult = useFidelisationRemiseStore((s) => s.remiseResult);
  const getFidelisationRemise = useFidelisationRemiseStore((s) => s.getFidelisationRemise);
  const validateRemiseEligibility = useFidelisationRemiseStore(
    (s) => s.validateRemiseEligibility,
  );
  const calculateMontantRemise = useFidelisationRemiseStore((s) => s.calculateMontantRemise);
  const reset = useFidelisationRemiseStore((s) => s.reset);

  useEffect(() => {
    return () => reset();
  }, [reset]);

  const handleCheckRemise = useCallback(async () => {
    await getFidelisationRemise('SOC1', 1001, 0, 'RST', 101);
  }, [getFidelisationRemise]);

  const handleValidateEligibility = useCallback(async () => {
    if (!remiseData) return;
    await validateRemiseEligibility(remiseData);
  }, [remiseData, validateRemiseEligibility]);

  const handleCalculateMontant = useCallback(async () => {
    if (!remiseData) return;
    await calculateMontantRemise(remiseData);
  }, [remiseData, calculateMontantRemise]);

  const handleBack = () => {
    navigate('/caisse/menu');
  };

  return (
    <ScreenLayout>
      <div className="space-y-6 max-w-3xl mx-auto">
        <div className="flex items-center justify-between">
          <div>
            <h2 className="text-xl font-semibold">Programme de fidélisation - Remise</h2>
            <p className="text-on-surface-muted text-sm mt-1">
              Vérification et calcul de remise fidélité
            </p>
          </div>
          {user && (
            <span className="text-xs text-on-surface-muted">
              {user.prenom} {user.nom}
            </span>
          )}
        </div>

        {error && (
          <div className="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md text-sm">
            {error}
          </div>
        )}

        {isLoading && (
          <div className="flex items-center justify-center py-8">
            <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div>
          </div>
        )}

        {!isLoading && !remiseResult && (
          <div className="bg-surface-secondary border border-border rounded-lg p-6 text-center">
            <p className="text-on-surface-muted mb-4">
              Aucune information de remise chargée
            </p>
            <button
              onClick={handleCheckRemise}
              className="px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark"
            >
              Charger exemple de remise
            </button>
          </div>
        )}

        {!isLoading && remiseResult && (
          <div className="space-y-4">
            <div className="bg-surface-secondary border border-border rounded-lg p-6">
              <h3 className="text-lg font-medium mb-4">Informations de remise</h3>

              <div className="grid grid-cols-2 gap-4">
                <div>
                  <label className="block text-sm font-medium text-on-surface-muted mb-1">
                    ID Fidélisation
                  </label>
                  <input
                    type="text"
                    value={remiseResult.fidelisationId || 'Aucun'}
                    readOnly
                    className="w-full px-3 py-2 border border-border rounded-md bg-surface-tertiary text-on-surface-muted"
                  />
                </div>

                <div>
                  <label className="block text-sm font-medium text-on-surface-muted mb-1">
                    Montant remise
                  </label>
                  <input
                    type="text"
                    value={`${remiseResult.montantRemise.toFixed(2)} %`}
                    readOnly
                    className="w-full px-3 py-2 border border-border rounded-md bg-surface-tertiary text-on-surface-muted"
                  />
                </div>

                <div className="col-span-2">
                  <label className="block text-sm font-medium text-on-surface-muted mb-1">
                    Statut de validité
                  </label>
                  <div
                    className={cn(
                      'px-4 py-3 rounded-md font-medium flex items-center gap-2',
                      remiseResult.isValide
                        ? 'bg-green-50 border border-green-200 text-green-700'
                        : 'bg-amber-50 border border-amber-200 text-amber-700',
                    )}
                  >
                    <span
                      className={cn(
                        'inline-block w-2 h-2 rounded-full',
                        remiseResult.isValide ? 'bg-green-600' : 'bg-amber-600',
                      )}
                    ></span>
                    {remiseResult.isValide ? 'Remise valide' : 'Remise non applicable'}
                  </div>
                </div>

                {remiseResult.message && (
                  <div className="col-span-2">
                    <label className="block text-sm font-medium text-on-surface-muted mb-1">
                      Message
                    </label>
                    <div className="px-4 py-3 bg-blue-50 border border-blue-200 text-blue-700 rounded-md text-sm">
                      {remiseResult.message}
                    </div>
                  </div>
                )}
              </div>
            </div>

            {remiseData && (
              <div className="bg-surface-secondary border border-border rounded-lg p-6">
                <h3 className="text-lg font-medium mb-4">Détails du compte</h3>
                <div className="grid grid-cols-3 gap-4 text-sm">
                  <div>
                    <span className="text-on-surface-muted">Société:</span>
                    <span className="ml-2 font-medium">{remiseData.societe}</span>
                  </div>
                  <div>
                    <span className="text-on-surface-muted">Compte:</span>
                    <span className="ml-2 font-medium">{remiseData.compte}</span>
                  </div>
                  <div>
                    <span className="text-on-surface-muted">Filiation:</span>
                    <span className="ml-2 font-medium">{remiseData.filiation}</span>
                  </div>
                  <div>
                    <span className="text-on-surface-muted">Service:</span>
                    <span className="ml-2 font-medium">{remiseData.service}</span>
                  </div>
                  <div>
                    <span className="text-on-surface-muted">Imputation:</span>
                    <span className="ml-2 font-medium">{remiseData.imputation}</span>
                  </div>
                  <div>
                    <span className="text-on-surface-muted">Remise base:</span>
                    <span className="ml-2 font-medium">
                      {remiseData.remise !== null ? `${remiseData.remise}%` : 'N/A'}
                    </span>
                  </div>
                </div>
              </div>
            )}

            <div className="flex gap-3">
              <button
                onClick={handleValidateEligibility}
                disabled={!remiseData}
                className="px-4 py-2 border border-border rounded-md text-on-surface hover:bg-surface-hover disabled:opacity-50 disabled:cursor-not-allowed"
              >
                Valider éligibilité
              </button>
              <button
                onClick={handleCalculateMontant}
                disabled={!remiseData}
                className="px-4 py-2 border border-border rounded-md text-on-surface hover:bg-surface-hover disabled:opacity-50 disabled:cursor-not-allowed"
              >
                Calculer montant
              </button>
            </div>
          </div>
        )}

        <div className="flex justify-start">
          <button
            onClick={handleBack}
            className="px-4 py-2 border border-border rounded-md text-on-surface hover:bg-surface-hover"
          >
            Retour au menu
          </button>
        </div>
      </div>
    </ScreenLayout>
  );
}
```