```json
{
  "domain": "facturationAppel",
  "domainPascal": "FacturationAppel",
  "complexity": "MEDIUM",
  "entities": [
    {
      "name": "HistoriqueAppel",
      "fields": [
        {
          "name": "societe",
          "type": "string",
          "source": "historique_pabx.societe",
          "nullable": false
        },
        {
          "name": "prefixe",
          "type": "string",
          "source": "historique_pabx.prefixe",
          "nullable": false
        },
        {
          "name": "dateAppel",
          "type": "Date",
          "source": "historique_pabx.date_appel",
          "nullable": false
        },
        {
          "name": "heureAppel",
          "type": "string",
          "source": "historique_pabx.heure_appel",
          "nullable": false
        },
        {
          "name": "numeroTel",
          "type": "string",
          "source": "historique_pabx.numero_tel",
          "nullable": false
        },
        {
          "name": "duree",
          "type": "string",
          "source": "historique_pabx.duree",
          "nullable": false
        },
        {
          "name": "montant",
          "type": "number",
          "source": "historique_pabx.montant",
          "nullable": false
        },
        {
          "name": "qualite",
          "type": "string",
          "source": "historique_pabx.qualite",
          "nullable": true
        },
        {
          "name": "gratuite",
          "type": "boolean",
          "source": "historique_pabx.gratuite",
          "nullable": false
        },
        {
          "name": "raisonGratuite",
          "type": "string",
          "source": "historique_pabx.raison_gratuite",
          "nullable": true
        }
      ]
    },
    {
      "name": "CoefTelephone",
      "fields": [
        {
          "name": "coefficient",
          "type": "number",
          "source": "coef__telephone__coe.coeff_tel",
          "nullable": false
        }
      ]
    },
    {
      "name": "ReseauCloture",
      "fields": [
        {
          "name": "cloture enCours",
          "type": "boolean",
          "source": "reseau_cloture___rec.cloture_en_cours",
          "nullable": false
        },
        {
          "name": "testReseau",
          "type": "string",
          "source": "reseau_cloture___rec.test_reseau",
          "nullable": true
        }
      ]
    }
  ],
  "stateFields": [
    {
      "name": "historiqueAppels",
      "type": "HistoriqueAppel[]",
      "default": "[]"
    },
    {
      "name": "coefficientTelephone",
      "type": "number | null",
      "default": "null"
    },
    {
      "name": "cloture",
      "type": "ReseauCloture | null",
      "default": "null"
    },
    {
      "name": "isLoading",
      "type": "boolean",
      "default": "false"
    },
    {
      "name": "error",
      "type": "string | null",
      "default": "null"
    },
    {
      "name": "filterSociete",
      "type": "string",
      "default": "''"
    },
    {
      "name": "filterDateDebut",
      "type": "Date | null",
      "default": "null"
    },
    {
      "name": "filterDateFin",
      "type": "Date | null",
      "default": "null"
    }
  ],
  "actions": [
    {
      "name": "chargerHistoriqueAppels",
      "params": [
        "societe: string",
        "prefixe: string",
        "dateDebut?: Date",
        "dateFin?: Date"
      ],
      "businessRules": [
        "Charger l'historique des appels filtré par société, préfixe et dates",
        "Trier par date et heure d'appel décroissant"
      ],
      "returns": "Promise<void>"
    },
    {
      "name": "recupererCoefficient",
      "params": [],
      "businessRules": [
        "Récupérer le coefficient de facturation téléphonique actif",
        "Stocker dans le state pour calcul ultérieur"
      ],
      "returns": "Promise<void>"
    },
    {
      "name": "facturer Appel",
      "params": [
        "appel: HistoriqueAppel",
        "numeroCompte: number",
        "filiation: number",
        "typeCompte: 'GO' | 'GM'"
      ],
      "businessRules": [
        "[RM-001] Si > GO [G] alors 'GO' sinon 'GM')",
        "Calculer le montant basé sur durée × coefficient",
        "Créer une opération de débit (O.D)",
        "Marquer l'appel comme facturé",
        "Vérifier si compte fictif avant facturation",
        "Gérer les appels gratuits (pas de facturation)"
      ],
      "returns": "Promise<void>"
    },
    {
      "name": "verifierCloture",
      "params": [],
      "businessRules": [
        "Vérifier si une clôture est en cours",
        "Bloquer les opérations si clôture active"
      ],
      "returns": "Promise<boolean>"
    },
    {
      "name": "debloquerCloture",
      "params": [],
      "businessRules": [
        "Débloquer le compte GM après traitement",
        "Mettre à jour le statut de clôture"
      ],
      "returns": "Promise<void>"
    },
    {
      "name": "marquerGratuit",
      "params": [
        "appelId: number",
        "raison: string"
      ],
      "businessRules": [
        "Marquer un appel comme gratuit avec raison",
        "Ne pas facturer si gratuit = true"
      ],
      "returns": "Promise<void>"
    },
    {
      "name": "annulerFacturation",
      "params": [
        "appelId: number"
      ],
      "businessRules": [
        "Annuler une facturation existante",
        "Créer une opération de crédit inverse",
        "Restaurer l'état non facturé"
      ],
      "returns": "Promise<void>"
    }
  ],
  "apiEndpoints": [
    {
      "method": "GET",
      "path": "/api/facturation-appel/historique",
      "queryParams": [
        "societe",
        "prefixe",
        "dateDebut?",
        "dateFin?"
      ],
      "response": "HistoriqueAppel[]"
    },
    {
      "method": "GET",
      "path": "/api/facturation-appel/coefficient",
      "queryParams": [],
      "response": "CoefTelephone"
    },
    {
      "method": "POST",
      "path": "/api/facturation-appel/facturer",
      "queryParams": [],
      "response": "{ success: boolean, operationId?: number }"
    },
    {
      "method": "GET",
      "path": "/api/facturation-appel/cloture-status",
      "queryParams": [],
      "response": "ReseauCloture"
    },
    {
      "method": "POST",
      "path": "/api/facturation-appel/debloquer-cloture",
      "queryParams": [],
      "response": "{ success: boolean }"
    },
    {
      "method": "PUT",
      "path": "/api/facturation-appel/marquer-gratuit/:id",
      "queryParams": [],
      "response": "{ success: boolean }"
    },
    {
      "method": "DELETE",
      "path": "/api/facturation-appel/annuler/:id",
      "queryParams": [],
      "response": "{ success: boolean }"
    }
  ],
  "uiLayout": {
    "type": "data-grid-page",
    "sections": [
      {
        "name": "filters",
        "controls": [
          "societe (select)",
          "prefixe (input)",
          "dateDebut (datepicker)",
          "dateFin (datepicker)",
          "btnSearch"
        ]
      },
      {
        "name": "grid",
        "controls": [
          "dateAppel (col)",
          "heureAppel (col)",
          "numeroTel (col)",
          "duree (col)",
          "montant (col)",
          "qualite (col)",
          "gratuite (col badge)",
          "actions (col buttons)"
        ]
      },
      {
        "name": "actions",
        "controls": [
          "btnFacturer",
          "btnMarquerGratuit",
          "btnAnnuler"
        ]
      },
      {
        "name": "summary",
        "controls": [
          "totalAppels (stat)",
          "totalMontant (stat)",
          "coefficientActuel (stat)",
          "cloture Status (badge)"
        ]
      }
    ]
  },
  "mockData": {
    "count": 8,
    "description": "8 appels téléphoniques avec variété: appels locaux/internationaux, durées 2-45min, montants 1.50-35.80 EUR, 2 appels gratuits (urgence, erreur), qualités OK/Mauvaise, dates derniers 7 jours, coefficient 0.15 EUR/min"
  },
  "dependencies": {
    "stores": [
      "useSessionStore (societe, prefixe actifs)",
      "useParametresStore (test reseau)",
      "useTransactionStore (création O.D)"
    ],
    "sharedTypes": [
      "HistoriqueAppel",
      "CoefTelephone",
      "ReseauCloture"
    ],
    "externalApis": [
      "GET /api/facturation-appel/historique",
      "GET /api/facturation-appel/coefficient",
      "POST /api/facturation-appel/facturer",
      "GET /api/facturation-appel/cloture-status"
    ]
  }
}
```