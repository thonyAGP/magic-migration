Voici le rapport JSON d'analyse de couverture :

```json
{
  "programId": 154,
  "programName": "Tableau recap fermeture",
  "coveragePct": 42,
  "rulesImplemented": 2,
  "rulesTotal": 5,
  "missingRules": [
    "[RM-001] Condition: W0 fin tache [BH] egale 'F' - Variable FU (finTache) pr√©sente dans le state mais logique conditionnelle absente",
    "[RM-004] Condition toujours vraie (flag actif) - P0 reimpression D/G='D' - Pas de v√©rification explicite dans genererTableau",
    "[RM-005] Condition: P0 reimpression D/G different de '' - Validation absente avant utilisation modeReimpression"
  ],
  "tablesCoverage": {
    "implemented": 3,
    "total": 24,
    "percentage": 13,
    "missing": [
      "saisie_remise_en_caisse (RW) - Types d√©finis mais pas de CRUD complet",
      "pv_discounts (RW) - saveDiscount existe mais interface vide (unknown)",
      "histo_sessions_caisse_article (R) - Utilis√© pour articles mais pas mapp√© entit√©",
      "heure_de_passage (R)",
      "histo_sessions_caisse_detail (R)",
      "gestion_article_session (R)",
      "gm-complet_______gmc (R)",
      "pv_comptable (R)",
      "comptage_caisse_histo (R)",
      "histo_sessions_caisse_remise (R)",
      "cc_comptable (R)",
      "gm-recherche_____gmr (R)",
      "frais_change___fchg (R)",
      "change_vente_____chg (R)",
      "articles_en_stock (R)",
      "comptage_caisse_devise (R)"
    ]
  },
  "calleesCoverage": {
    "implemented": 1,
    "total": 6,
    "percentage": 17,
    "missing": [
      "[IDE 22] Calcul equivalent - calculerEquivalent existe mais appel non trac√© vers IDE 22",
      "[IDE 43] Recuperation du titre - Absent",
      "[IDE 179] Get Printer - N/A legacy",
      "[IDE 180] Printer choice - N/A legacy",
      "[IDE 181] Set Listing Number - N/A legacy",
      "[IDE 182] Raz Current Printer - N/A legacy"
    ]
  },
  "recommendations": [
    "üî¥ CRITIQUE - Impl√©menter RM-001: Ajouter logique conditionnelle pour finTache='F' avant certaines actions",
    "üî¥ CRITIQUE - Impl√©menter RM-004 et RM-005: Valider modeReimpression ('D'/'G'/null) syst√©matiquement",
    "üü° IMPORTANT - Compl√©ter SaveDiscountRequest interface (actuellement [key: string]: unknown)",
    "üü° IMPORTANT - Mapper les 16 tables manquantes vers des entit√©s TypeScript",
    "üü° IMPORTANT - Cr√©er endpoints API pour saisie_remise_en_caisse et pv_discounts (actuellement mock)",
    "üü¢ AM√âLIORATION - Ajouter error handling sp√©cifique pour chaque r√®gle m√©tier",
    "üü¢ AM√âLIORATION - Impl√©menter validation Zod pour tous les payloads API",
    "üü¢ AM√âLIORATION - Cr√©er composants r√©utilisables pour HeaderPanel, FooterPanel, etc.",
    "üü¢ AM√âLIORATION - Ajouter tests unitaires pour les 5 r√®gles m√©tier",
    "üü¢ AM√âLIORATION - Documenter le mapping table Magic ‚Üí TypeScript dans README"
  ],
  "positivePoints": [
    "‚úÖ Store Zustand bien structur√© avec s√©paration state/actions",
    "‚úÖ Validation printer (n¬∞1 ou n¬∞9) impl√©ment√©e correctement (RM-002, RM-003)",
    "‚úÖ calculerEquivalent pr√©sent pour calculs de change",
    "‚úÖ Mode mock/API via dataSourceStore",
    "‚úÖ UI compl√®te avec 4 onglets (recap, remises, articles, exports)",
    "‚úÖ D√©tection √©carts et affichage visuel (rouge si √©cart > 0.01)",
    "‚úÖ Export PDF/EXCEL fonctionnel",
    "‚úÖ Gestion modeReimpression D/G pr√©sente"
  ],
  "criticalGaps": [
    {
      "rule": "RM-001",
      "severity": "HIGH",
      "description": "finTache flag existe mais pas utilis√© conditionnellement",
      "impact": "Actions peuvent s'ex√©cuter m√™me si t√¢che non termin√©e",
      "fix": "Ajouter guards: if (finTache !== true) return; avant genererTableau/export"
    },
    {
      "table": "saisie_remise_en_caisse",
      "severity": "HIGH",
      "description": "Table RW d√©clar√©e mais pas de mutations SQL r√©elles",
      "impact": "Donn√©es de remise non persist√©es en base",
      "fix": "Cr√©er endpoints POST/PUT /api/remises avec SQL INSERT/UPDATE"
    },
    {
      "table": "pv_discounts",
      "severity": "HIGH",
      "description": "saveDiscount interface vide (unknown), pas de typage",
      "impact": "Erreurs runtime possibles, pas de validation TypeScript",
      "fix": "D√©finir SaveDiscountRequest avec champs explicites"
    },
    {
      "callee": "IDE 22 - Calcul equivalent",
      "severity": "MEDIUM",
      "description": "calculerEquivalent existe mais pas trac√© vers IDE 22",
      "impact": "Fonction non appel√©e selon spec originale (6 appels attendus)",
      "fix": "V√©rifier si calculerEquivalent doit appeler /api/change/calculer-equivalent"
    }
  ],
  "technicalDebt": [
    "16/24 tables manquantes (67% de donn√©es non exploit√©es)",
    "4/6 callees legacy printer (N/A justifi√© mais documenter alternative web)",
    "Variables Magic FU/EZ pas mapp√©es explicitement (finTache pr√©sent mais pas nomm√© FU)",
    "Pas de tests automatis√©s pour valider les 5 r√®gles m√©tier"
  ]
}
```

**R√©sum√© ex√©cutif:**

Le code g√©n√©r√© couvre **42% du contrat**, avec une base solide pour l'UI et le flux principal, mais des gaps critiques sur:

1. **Logique m√©tier** : 3/5 r√®gles manquantes (RM-001, RM-004, RM-005)
2. **Persistance** : 2 tables RW (remises, discounts) sans SQL r√©el
3. **Donn√©es** : 16/24 tables non mapp√©es (67% non exploit√©es)
4. **Appels externes** : 1/6 callees impl√©ment√© (les 4 legacy justifi√©s N/A)

**Priorit√©s de compl√©tion:**
1. Impl√©menter RM-001 (guard finTache)
2. Compl√©ter SaveDiscountRequest interface
3. Cr√©er endpoints SQL pour saisie_remise_en_caisse/pv_discounts
4. Mapper les tables manquantes critiques (histo_sessions_*)