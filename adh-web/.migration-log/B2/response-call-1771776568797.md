```json
{
  "domain": "gestionCaisse",
  "domainPascal": "GestionCaisse",
  "complexity": "HIGH",
  "entities": [
    {
      "name": "SessionCaisse",
      "fields": [
        {
          "name": "sessionId",
          "type": "number",
          "source": "histo_sessions_caisse.session_id",
          "nullable": false
        },
        {
          "name": "dateOuverture",
          "type": "Date",
          "source": "histo_sessions_caisse.date_ouverture",
          "nullable": false
        },
        {
          "name": "dateFermeture",
          "type": "Date",
          "source": "histo_sessions_caisse.date_fermeture",
          "nullable": true
        },
        {
          "name": "operateurId",
          "type": "number",
          "source": "histo_sessions_caisse.operateur_id",
          "nullable": false
        },
        {
          "name": "operateurNom",
          "type": "string",
          "source": "derived from operateur_id",
          "nullable": false
        },
        {
          "name": "statut",
          "type": "string",
          "source": "histo_sessions_caisse.statut",
          "nullable": false
        },
        {
          "name": "montantOuverture",
          "type": "number",
          "source": "histo_sessions_caisse.montant_ouverture",
          "nullable": false
        },
        {
          "name": "montantFermeture",
          "type": "number",
          "source": "histo_sessions_caisse.montant_fermeture",
          "nullable": true
        },
        {
          "name": "ecart",
          "type": "number",
          "source": "calculated: montantFermeture - montantAttendu",
          "nullable": true
        }
      ]
    },
    {
      "name": "ParametresCaisse",
      "fields": [
        {
          "name": "caisseId",
          "type": "number",
          "source": "parametres_caisse.caisse_id",
          "nullable": false
        },
        {
          "name": "seuilAlerte",
          "type": "number",
          "source": "parametres_caisse.seuil_alerte",
          "nullable": false
        },
        {
          "name": "deviseLocale",
          "type": "string",
          "source": "parametres_caisse.devise_locale",
          "nullable": false
        },
        {
          "name": "impressionAuto",
          "type": "boolean",
          "source": "parametres_caisse.impression_auto",
          "nullable": false
        }
      ]
    },
    {
      "name": "SessionCoffre",
      "fields": [
        {
          "name": "sessionId",
          "type": "number",
          "source": "sessions_coffre2.session_id",
          "nullable": false
        },
        {
          "name": "montantCoffre",
          "type": "number",
          "source": "sessions_coffre2.montant_coffre",
          "nullable": false
        },
        {
          "name": "integrite",
          "type": "boolean",
          "source": "derived from IDE 155/156 validation",
          "nullable": false
        }
      ]
    },
    {
      "name": "MouvementCaisse",
      "fields": [
        {
          "name": "mouvementId",
          "type": "number",
          "source": "saisie_approvisionnement.mouvement_id",
          "nullable": false
        },
        {
          "name": "sessionId",
          "type": "number",
          "source": "saisie_approvisionnement.session_id",
          "nullable": false
        },
        {
          "name": "type",
          "type": "string",
          "source": "saisie_approvisionnement.type",
          "nullable": false
        },
        {
          "name": "deviseCode",
          "type": "string",
          "source": "saisie_approvisionnement.devise_code",
          "nullable": false
        },
        {
          "name": "montant",
          "type": "number",
          "source": "saisie_approvisionnement.montant",
          "nullable": false
        },
        {
          "name": "dateHeure",
          "type": "Date",
          "source": "saisie_approvisionnement.date_heure",
          "nullable": false
        }
      ]
    },
    {
      "name": "SessionConcurrente",
      "fields": [
        {
          "name": "sessionId",
          "type": "number",
          "source": "concurrence_sessions.session_id",
          "nullable": false
        },
        {
          "name": "posteId",
          "type": "string",
          "source": "concurrence_sessions.poste_id",
          "nullable": false
        },
        {
          "name": "operateurNom",
          "type": "string",
          "source": "concurrence_sessions.operateur_nom",
          "nullable": false
        },
        {
          "name": "dateOuverture",
          "type": "Date",
          "source": "concurrence_sessions.date_ouverture",
          "nullable": false
        }
      ]
    },
    {
      "name": "DateComptable",
      "fields": [
        {
          "name": "date",
          "type": "Date",
          "source": "date_comptable___dat.date",
          "nullable": false
        },
        {
          "name": "valide",
          "type": "boolean",
          "source": "derived validation",
          "nullable": false
        }
      ]
    }
  ],
  "stateFields": [
    {
      "name": "sessionActive",
      "type": "SessionCaisse | null",
      "default": "null"
    },
    {
      "name": "parametres",
      "type": "ParametresCaisse | null",
      "default": "null"
    },
    {
      "name": "sessionsConcurrentes",
      "type": "SessionConcurrente[]",
      "default": "[]"
    },
    {
      "name": "mouvements",
      "type": "MouvementCaisse[]",
      "default": "[]"
    },
    {
      "name": "historique",
      "type": "SessionCaisse[]",
      "default": "[]"
    },
    {
      "name": "dateComptable",
      "type": "DateComptable | null",
      "default": "null"
    },
    {
      "name": "isLoading",
      "type": "boolean",
      "default": "false"
    },
    {
      "name": "error",
      "type": "string | null",
      "default": "null"
    },
    {
      "name": "showHistoriqueDialog",
      "type": "boolean",
      "default": "false"
    },
    {
      "name": "showConsultationDialog",
      "type": "boolean",
      "default": "false"
    },
    {
      "name": "selectedSessionId",
      "type": "number | null",
      "default": "null"
    }
  ],
  "actions": [
    {
      "name": "chargerParametres",
      "params": [],
      "businessRules": [
        "Charger les parametres de caisse depuis parametres_caisse (table 697)",
        "Valider la configuration de la caisse (seuil, devise, impression)"
      ],
      "returns": "Promise<void>"
    },
    {
      "name": "chargerSessionActive",
      "params": [],
      "businessRules": [
        "Lire histo_sessions_caisse pour la session courante",
        "Determiner l'etat (ouverte, fermee, en cloture)",
        "Appeler IDE 48 pour controler l'integrite des dates"
      ],
      "returns": "Promise<void>"
    },
    {
      "name": "verifierDateComptable",
      "params": [],
      "businessRules": [
        "Lire date_comptable___dat (table 70)",
        "Valider que la journee comptable est ouverte"
      ],
      "returns": "Promise<void>"
    },
    {
      "name": "controlerCoffre",
      "params": [],
      "businessRules": [
        "Verifier l'integrite des donnees sessions_coffre2",
        "Appeler IDE 155 (Controle fermeture caisse WS)",
        "Appeler IDE 156 (Verif session caisse ouverte2)"
      ],
      "returns": "Promise<void>"
    },
    {
      "name": "detecterSessionsConcurrentes",
      "params": [],
      "businessRules": [
        "Appeler IDE 116 (Calcul concurrence sessions) 12 fois",
        "Lire concurrence_sessions (caisse_concurrences)",
        "Alerter si plusieurs postes sont ouverts simultanement"
      ],
      "returns": "Promise<void>"
    },
    {
      "name": "ouvrirSession",
      "params": [],
      "businessRules": [
        "Verifier qu'aucune cloture n'est en cours (reseau_cloture___rec)",
        "Controler coherence stocks monnaie et produit (table 198)",
        "Creer enregistrement dans histo_sessions_caisse (Write)",
        "Creer enregistrement dans sessions_coffre2 (Write)",
        "Initialiser saisie_approvisionnement pour comptage initial",
        "Appeler IDE 122 (Ouverture caisse) pour processus complet",
        "Appeler IDE 141 (Init devise session WS) pour initialisation devises"
      ],
      "returns": "Promise<void>"
    },
    {
      "name": "apportCoffre",
      "params": [
        "montant: number",
        "deviseCode: string"
      ],
      "businessRules": [
        "Appeler IDE 123 (Apport coffre) pour approvisionnement especes",
        "Enregistrer mouvement via IDE 134 (Mise a jour detail session WS)",
        "Imprimer ticket via IDE 139 (Ticket appro remise)"
      ],
      "returns": "Promise<void>"
    },
    {
      "name": "apportProduit",
      "params": [
        "produitId: number",
        "quantite: number"
      ],
      "businessRules": [
        "Appeler IDE 124 (Apport articles) pour approvisionnement articles",
        "Appeler IDE 140 (Init apport article session WS)",
        "Enregistrer mouvement via IDE 134"
      ],
      "returns": "Promise<void>"
    },
    {
      "name": "remiseCoffre",
      "params": [
        "montant: number",
        "deviseCode: string"
      ],
      "businessRules": [
        "Appeler IDE 125 (Remise en caisse) pour retour especes vers coffre",
        "Enregistrer mouvement via IDE 134",
        "RAZ saisie_approvisionnement (Write, Delete)",
        "Imprimer ticket via IDE 139"
      ],
      "returns": "Promise<void>"
    },
    {
      "name": "fermerSession",
      "params": [],
      "businessRules": [
        "Appeler IDE 131 (Fermeture caisse) pour workflow cloture complet",
        "Mettre a jour histo_sessions_caisse en mode Write (statut ferme)",
        "Verifier coherence mouvements coffre (pointage apports/remises)",
        "Calculer ecarts entre attendu et reel",
        "Recalculer totaux sessions ouvertes"
      ],
      "returns": "Promise<void>"
    },
    {
      "name": "consulterHistorique",
      "params": [],
      "businessRules": [
        "Appeler IDE 132 (Historique session) pour ecran consultation",
        "Afficher sessions passees avec filtres"
      ],
      "returns": "Promise<void>"
    },
    {
      "name": "consulterSession",
      "params": [
        "sessionId: number"
      ],
      "businessRules": [
        "Appeler IDE 119 (Affichage sessions) pour detail session",
        "Afficher mouvements, totaux, ecarts"
      ],
      "returns": "Promise<void>"
    },
    {
      "name": "reimprimerTickets",
      "params": [
        "sessionId: number"
      ],
      "businessRules": [
        "Appeler IDE 151 (Reimpression tickets fermeture)",
        "Appeler IDE 139 (Ticket appro remise) pour tickets mouvements"
      ],
      "returns": "Promise<void>"
    }
  ],
  "apiEndpoints": [
    {
      "method": "GET",
      "path": "/api/gestion-caisse/parametres",
      "queryParams": [],
      "response": "ParametresCaisse"
    },
    {
      "method": "GET",
      "path": "/api/gestion-caisse/session-active",
      "queryParams": [],
      "response": "SessionCaisse | null"
    },
    {
      "method": "GET",
      "path": "/api/gestion-caisse/date-comptable",
      "queryParams": [],
      "response": "DateComptable"
    },
    {
      "method": "GET",
      "path": "/api/gestion-caisse/sessions-concurrentes",
      "queryParams": [],
      "response": "SessionConcurrente[]"
    },
    {
      "method": "POST",
      "path": "/api/gestion-caisse/ouvrir-session",
      "queryParams": [],
      "response": "SessionCaisse"
    },
    {
      "method": "POST",
      "path": "/api/gestion-caisse/apport-coffre",
      "queryParams": [
        "montant",
        "deviseCode"
      ],
      "response": "MouvementCaisse"
    },
    {
      "method": "POST",
      "path": "/api/gestion-caisse/apport-produit",
      "queryParams": [
        "produitId",
        "quantite"
      ],
      "response": "MouvementCaisse"
    },
    {
      "method": "POST",
      "path": "/api/gestion-caisse/remise-coffre",
      "queryParams": [
        "montant",
        "deviseCode"
      ],
      "response": "MouvementCaisse"
    },
    {
      "method": "POST",
      "path": "/api/gestion-caisse/fermer-session",
      "queryParams": [],
      "response": "SessionCaisse"
    },
    {
      "method": "GET",
      "path": "/api/gestion-caisse/historique",
      "queryParams": [
        "dateDebut?",
        "dateFin?",
        "operateurId?"
      ],
      "response": "SessionCaisse[]"
    },
    {
      "method": "GET",
      "path": "/api/gestion-caisse/session/{sessionId}",
      "queryParams": [],
      "response": "SessionCaisse"
    },
    {
      "method": "GET",
      "path": "/api/gestion-caisse/mouvements/{sessionId}",
      "queryParams": [],
      "response": "MouvementCaisse[]"
    },
    {
      "method": "POST",
      "path": "/api/gestion-caisse/reimprimer-tickets/{sessionId}",
      "queryParams": [],
      "response": "void"
    }
  ],
  "uiLayout": {
    "type": "dashboard-with-actions",
    "sections": [
      {
        "name": "headerSection",
        "controls": [
          "operateurNom",
          "dateComptable",
          "sessionStatut"
        ]
      },
      {
        "name": "montantsSection",
        "controls": [
          "montantOuverture",
          "montantActuel",
          "montantFermeture",
          "ecart"
        ]
      },
      {
        "name": "alertesSection",
        "controls": [
          "sessionsConcurrentesList",
          "integriteCoffre"
        ]
      },
      {
        "name": "actionsSection",
        "controls": [
          "btnOuvrirSession",
          "btnFermerSession",
          "btnApportCoffre",
          "btnApportProduit",
          "btnRemiseCoffre",
          "btnHistorique",
          "btnConsultation",
          "btnReimprimer"
        ]
      },
      {
        "name": "mouvementsSection",
        "controls": [
          "mouvementsGrid"
        ]
      }
    ]
  },
  "mockData": {
    "count": 5,
    "description": "Mock data includes: 1 active session with 3 currency movements (EUR, USD), 2 concurrent sessions from different terminals, 5 historical closed sessions with varying ecarts, parameters with EUR as local currency and 100 EUR alert threshold, valid accounting date, and integrity checks passing for coffre2"
  },
  "dependencies": {
    "stores": [
      "useSessionStore",
      "useDeviseStore",
      "useOperateurStore"
    ],
    "sharedTypes": [
      "SessionStatut",
      "MouvementType",
      "DeviseCode"
    ],
    "externalApis": [
      "IDE 116 - Calcul concurrence sessions",
      "IDE 43 - Recuperation du titre",
      "IDE 48 - Controles - Integrite dates",
      "IDE 122 - Ouverture caisse",
      "IDE 123 - Apport coffre",
      "IDE 124 - Apport articles",
      "IDE 125 - Remise en caisse",
      "IDE 131 - Fermeture caisse",
      "IDE 132 - Historique session",
      "IDE 119 - Affichage sessions",
      "IDE 134 - Mise a jour detail session WS",
      "IDE 139 - Ticket appro remise",
      "IDE 140 - Init apport article session WS",
      "IDE 141 - Init devise session WS",
      "IDE 151 - Reimpression tickets fermeture",
      "IDE 155 - Controle fermeture caisse WS",
      "IDE 156 - Verif session caisse ouverte2"
    ]
  }
}
```