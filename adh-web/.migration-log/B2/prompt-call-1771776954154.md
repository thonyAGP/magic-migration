Generate Vitest unit tests for the "gestionCaisseStore".

RULES (MANDATORY):
- Use import aliases: @/ for src root (e.g. @/stores/..., @/types/...)
- NEVER use `any` type - use `unknown` or precise types
- Tailwind v4 classes for styling (no tailwind.config.js)
- Arrow functions everywhere (no function declarations)
- `as const` instead of TypeScript enum
- verbatimModuleSyntax is enabled: use `import type { X }` ONLY for types/interfaces, use `import { X }` for values/consts
- File must be COMPLETE and ready to write - NO placeholders, NO TODOs, NO "// implement here"
- NO comments except for genuinely complex logic
- Output ONLY the code inside a single markdown code block (```typescript ... ``` or ```tsx ... ```)

SHARED INFRASTRUCTURE (use these exact imports):
- Data source toggle: `import { useDataSourceStore } from "@/stores/dataSourceStore"` (has .getState().isRealApi)
- API client: `import { apiClient } from "@/services/api/apiClient"` and `import type { ApiResponse } from "@/services/api/apiClient"`
- Screen layout: `import { ScreenLayout } from "@/components/layout"` (wrapper with sidebar, takes children + className)
- UI components: `import { Button, Dialog, Input } from "@/components/ui"`
- cn utility: `import { cn } from "@/lib/utils"`

TEST REQUIREMENTS:
- Use @vitest-environment jsdom
- import { describe, it, expect, beforeEach, vi } from "vitest"
- vi.mock() for API service
- beforeEach: reset store state
- AAA pattern (Arrange, Act, Assert)
- Test EACH action: success path + error path + loading state
- Mock data as constants at top of file
- Test business rules explicitly

STORE TO TEST:


TYPES:


ACTIONS TO COVER:
[
  {
    "name": "chargerParametres",
    "params": [],
    "businessRules": [
      "Charger les parametres de caisse depuis parametres_caisse (table 697)",
      "Valider la configuration de la caisse (seuil, devise, impression)"
    ],
    "returns": "Promise<void>"
  },
  {
    "name": "chargerSessionActive",
    "params": [],
    "businessRules": [
      "Lire histo_sessions_caisse pour la session courante",
      "Determiner l'etat (ouverte, fermee, en cloture)",
      "Appeler IDE 48 pour controler l'integrite des dates"
    ],
    "returns": "Promise<void>"
  },
  {
    "name": "verifierDateComptable",
    "params": [],
    "businessRules": [
      "Lire date_comptable___dat (table 70)",
      "Valider que la journee comptable est ouverte"
    ],
    "returns": "Promise<void>"
  },
  {
    "name": "controlerCoffre",
    "params": [],
    "businessRules": [
      "Verifier l'integrite des donnees sessions_coffre2",
      "Appeler IDE 155 (Controle fermeture caisse WS)",
      "Appeler IDE 156 (Verif session caisse ouverte2)"
    ],
    "returns": "Promise<void>"
  },
  {
    "name": "detecterSessionsConcurrentes",
    "params": [],
    "businessRules": [
      "Appeler IDE 116 (Calcul concurrence sessions) 12 fois",
      "Lire concurrence_sessions (caisse_concurrences)",
      "Alerter si plusieurs postes sont ouverts simultanement"
    ],
    "returns": "Promise<void>"
  },
  {
    "name": "ouvrirSession",
    "params": [],
    "businessRules": [
      "Verifier qu'aucune cloture n'est en cours (reseau_cloture___rec)",
      "Controler coherence stocks monnaie et produit (table 198)",
      "Creer enregistrement dans histo_sessions_caisse (Write)",
      "Creer enregistrement dans sessions_coffre2 (Write)",
      "Initialiser saisie_approvisionnement pour comptage initial",
      "Appeler IDE 122 (Ouverture caisse) pour processus complet",
      "Appeler IDE 141 (Init devise session WS) pour initialisation devises"
    ],
    "returns": "Promise<void>"
  },
  {
    "name": "apportCoffre",
    "params": [
      "montant: number",
      "deviseCode: string"
    ],
    "businessRules": [
      "Appeler IDE 123 (Apport coffre) pour approvisionnement especes",
      "Enregistrer mouvement via IDE 134 (Mise a jour detail session WS)",
      "Imprimer ticket via IDE 139 (Ticket appro remise)"
    ],
    "returns": "Promise<void>"
  },
  {
    "name": "apportProduit",
    "params": [
      "produitId: number",
      "quantite: number"
    ],
    "businessRules": [
      "Appeler IDE 124 (Apport articles) pour approvisionnement articles",
      "Appeler IDE 140 (Init apport article session WS)",
      "Enregistrer mouvement via IDE 134"
    ],
    "returns": "Promise<void>"
  },
  {
    "name": "remiseCoffre",
    "params": [
      "montant: number",
      "deviseCode: string"
    ],
    "businessRules": [
      "Appeler IDE 125 (Remise en caisse) pour retour especes vers coffre",
      "Enregistrer mouvement via IDE 134",
      "RAZ saisie_approvisionnement (Write, Delete)",
      "Imprimer ticket via IDE 139"
    ],
    "returns": "Promise<void>"
  },
  {
    "name": "fermerSession",
    "params": [],
    "businessRules": [
      "Appeler IDE 131 (Fermeture caisse) pour workflow cloture complet",
      "Mettre a jour histo_sessions_caisse en mode Write (statut ferme)",
      "Verifier coherence mouvements coffre (pointage apports/remises)",
      "Calculer ecarts entre attendu et reel",
      "Recalculer totaux sessions ouvertes"
    ],
    "returns": "Promise<void>"
  },
  {
    "name": "consulterHistorique",
    "params": [],
    "businessRules": [
      "Appeler IDE 132 (Historique session) pour ecran consultation",
      "Afficher sessions passees avec filtres"
    ],
    "returns": "Promise<void>"
  },
  {
    "name": "consulterSession",
    "params": [
      "sessionId: number"
    ],
    "businessRules": [
      "Appeler IDE 119 (Affichage sessions) pour detail session",
      "Afficher mouvements, totaux, ecarts"
    ],
    "returns": "Promise<void>"
  },
  {
    "name": "reimprimerTickets",
    "params": [
      "sessionId: number"
    ],
    "businessRules": [
      "Appeler IDE 151 (Reimpression tickets fermeture)",
      "Appeler IDE 139 (Ticket appro remise) pour tickets mouvements"
    ],
    "returns": "Promise<void>"
  }
]