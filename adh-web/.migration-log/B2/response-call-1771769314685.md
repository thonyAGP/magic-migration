```json
{
  "domain": "saisieContenuCaisse",
  "domainPascal": "SaisieContenuCaisse",
  "complexity": "MEDIUM",
  "entities": [
    {
      "name": "RemiseCaisse",
      "fields": [
        {
          "name": "societe",
          "type": "string",
          "source": "parameter",
          "nullable": false
        },
        {
          "name": "deviseLocale",
          "type": "string",
          "source": "parameter",
          "nullable": false
        },
        {
          "name": "typeRemise",
          "type": "string",
          "source": "parameter",
          "nullable": false,
          "comment": "P=Produit, M=Monnaie, C=Carte, etc."
        },
        {
          "name": "montantCompte",
          "type": "number",
          "source": "calculation",
          "nullable": false
        },
        {
          "name": "montantVersement",
          "type": "number",
          "source": "user_input",
          "nullable": false
        },
        {
          "name": "ecart",
          "type": "number",
          "source": "calculation",
          "nullable": false,
          "comment": "montantVersement - montantCompte"
        }
      ]
    },
    {
      "name": "PvComptable",
      "fields": [
        {
          "name": "dateComptable",
          "type": "Date",
          "source": "date_comptable___dat",
          "nullable": false
        },
        {
          "name": "typeAnomalie",
          "type": "string",
          "source": "parameter",
          "nullable": false
        },
        {
          "name": "montantEcart",
          "type": "number",
          "source": "calculation",
          "nullable": false
        }
      ]
    },
    {
      "name": "GestionDeviseSession",
      "fields": [
        {
          "name": "deviseLocale",
          "type": "string",
          "source": "gestion_devise_session.Param devise locale",
          "nullable": false
        },
        {
          "name": "nombreDevises",
          "type": "number",
          "source": "gestion_devise_session.Nbre devises",
          "nullable": false
        },
        {
          "name": "nombreDevisesComptees",
          "type": "number",
          "source": "gestion_devise_session.Param Nbre devise comptees",
          "nullable": false
        },
        {
          "name": "montantVersementDevises",
          "type": "number",
          "source": "gestion_devise_session.Param Mt versement Nb devises",
          "nullable": false
        }
      ]
    },
    {
      "name": "GestionArticleSession",
      "fields": [
        {
          "name": "stockProduit",
          "type": "number",
          "source": "gestion_article_session.V STOCK PRODUIT",
          "nullable": false
        },
        {
          "name": "total",
          "type": "number",
          "source": "gestion_article_session.TOTAL",
          "nullable": false
        }
      ]
    }
  ],
  "stateFields": [
    {
      "name": "remise",
      "type": "RemiseCaisse | null",
      "default": "null"
    },
    {
      "name": "montantsSaisis",
      "type": "Record<string, number>",
      "default": "{}",
      "comment": "monnaie, produits, cartes, cheques, od, devises"
    },
    {
      "name": "montantsComptes",
      "type": "Record<string, number>",
      "default": "{}",
      "comment": "Montants theoriques par type"
    },
    {
      "name": "ecarts",
      "type": "Record<string, number>",
      "default": "{}",
      "comment": "Differences par type"
    },
    {
      "name": "anomalies",
      "type": "PvComptable[]",
      "default": "[]"
    },
    {
      "name": "stocksArticles",
      "type": "GestionArticleSession[]",
      "default": "[]"
    },
    {
      "name": "devisesSession",
      "type": "GestionDeviseSession[]",
      "default": "[]"
    },
    {
      "name": "isLoading",
      "type": "boolean",
      "default": "false"
    },
    {
      "name": "error",
      "type": "string | null",
      "default": "null"
    },
    {
      "name": "validationErrors",
      "type": "Record<string, string>",
      "default": "{}"
    },
    {
      "name": "coffre2Ouvert",
      "type": "boolean",
      "default": "false"
    },
    {
      "name": "uniBI",
      "type": "string",
      "default": "'UNI'",
      "comment": "UNI ou BI"
    }
  ],
  "actions": [
    {
      "name": "initialiserRemise",
      "params": [
        "societe: string",
        "deviseLocale: string",
        "typeRemise: string"
      ],
      "businessRules": [
        "Initialiser les montants comptes depuis gestion_devise_session",
        "Initialiser les montants comptés à zéro",
        "Récupérer le titre du membre (callee IDE 43)",
        "Charger les stocks articles depuis gestion_article_session"
      ],
      "returns": "Promise<void>"
    },
    {
      "name": "saisirMontant",
      "params": [
        "type: string",
        "montant: number"
      ],
      "businessRules": [
        "Enregistrer le montant saisi pour le type donné (monnaie, produits, etc.)",
        "Calculer l'écart = montantSaisi - montantCompte",
        "Si écart != 0, créer une entrée anomalie dans pv_comptable",
        "Valider que montant >= 0"
      ],
      "returns": "Promise<void>"
    },
    {
      "name": "validerRemise",
      "params": [],
      "businessRules": [
        "RM-001: Si Param quand != 'P', effectuer traitement spécifique",
        "Mettre à jour gestion_devise_session avec montants versés",
        "Mettre à jour gestion_article_session avec stocks recalculés",
        "Appeler IDE 142 (Devise update session WS)",
        "Appeler IDE 149 (Calcul stock produit WS)",
        "Enregistrer dans saisie_approvisionnement",
        "Si anomalies détectées, persister pv_comptable",
        "Enregistrer email_reprise si nécessaire"
      ],
      "returns": "Promise<void>"
    },
    {
      "name": "calculerEcarts",
      "params": [],
      "businessRules": [
        "Pour chaque type de paiement (monnaie, produits, cartes, cheques, od, devises)",
        "Calculer écart = montantVersement - montantCompte",
        "Marquer les types avec écart comme anomalies"
      ],
      "returns": "void"
    },
    {
      "name": "chargerMontantsComptes",
      "params": [
        "societe: string"
      ],
      "businessRules": [
        "Lire gestion_devise_session pour obtenir montants théoriques",
        "Lire moyen_paiement___mop pour détails moyens paiement",
        "Calculer totaux par type (monnaie, cartes, chèques, OD)",
        "Charger nombre de devises comptées"
      ],
      "returns": "Promise<void>"
    },
    {
      "name": "genererPvComptable",
      "params": [
        "typeAnomalie: string",
        "montantEcart: number"
      ],
      "businessRules": [
        "Créer entrée pv_comptable avec date comptable actuelle",
        "Enregistrer type anomalie et montant écart",
        "Horodater l'anomalie"
      ],
      "returns": "Promise<void>"
    },
    {
      "name": "mettreAJourStocks",
      "params": [],
      "businessRules": [
        "Pour chaque article remis, mettre à jour gestion_article_session",
        "Recalculer V STOCK PRODUIT et TOTAL",
        "Appeler IDE 149 pour validation finale des stocks"
      ],
      "returns": "Promise<void>"
    },
    {
      "name": "reset",
      "params": [],
      "businessRules": [
        "Réinitialiser tous les montants saisis à zéro",
        "Vider les anomalies",
        "Réinitialiser les erreurs de validation"
      ],
      "returns": "void"
    }
  ],
  "apiEndpoints": [
    {
      "method": "GET",
      "path": "/api/saisie-contenu-caisse/montants-comptes",
      "queryParams": [
        "societe",
        "sessionId?"
      ],
      "response": "{ monnaie: number, produits: number, cartes: number, cheques: number, od: number, devises: number }"
    },
    {
      "method": "POST",
      "path": "/api/saisie-contenu-caisse/valider-remise",
      "queryParams": [],
      "response": "{ success: boolean, anomalies: PvComptable[], ecarts: Record<string, number> }",
      "body": "{ societe: string, typeRemise: string, montants: Record<string, number> }"
    },
    {
      "method": "GET",
      "path": "/api/saisie-contenu-caisse/stocks-articles",
      "queryParams": [
        "societe",
        "sessionId?"
      ],
      "response": "GestionArticleSession[]"
    },
    {
      "method": "GET",
      "path": "/api/saisie-contenu-caisse/devises-session",
      "queryParams": [
        "societe",
        "sessionId?"
      ],
      "response": "GestionDeviseSession[]"
    },
    {
      "method": "POST",
      "path": "/api/saisie-contenu-caisse/generer-pv",
      "queryParams": [],
      "response": "{ pvId: number, dateCreation: Date }",
      "body": "{ typeAnomalie: string, montantEcart: number, dateComptable: Date }"
    }
  ],
  "uiLayout": {
    "type": "modal-form",
    "sections": [
      {
        "name": "header",
        "controls": [
          "Titre: Remise en caisse",
          "Société",
          "Devise locale"
        ]
      },
      {
        "name": "montantsComptes",
        "controls": [
          "Label: Montants comptés (lecture seule)",
          "Monnaie comptée",
          "Produits comptés",
          "Cartes comptées",
          "Chèques comptés",
          "OD comptés",
          "Devises comptées"
        ]
      },
      {
        "name": "saisieVersements",
        "controls": [
          "Label: Saisie des versements",
          "Input: Versement monnaie (numeric)",
          "Input: Versement produits (numeric)",
          "Input: Versement cartes (numeric)",
          "Input: Versement chèques (numeric)",
          "Input: Versement OD (numeric)",
          "Input: Versement devises (numeric)"
        ]
      },
      {
        "name": "ecarts",
        "controls": [
          "Label: Écarts détectés (si différence)",
          "DataGrid: Liste écarts par type",
          "Colonne: Type paiement",
          "Colonne: Montant compté",
          "Colonne: Montant versé",
          "Colonne: Écart",
          "Alert: Anomalies si écart != 0"
        ]
      },
      {
        "name": "actions",
        "controls": [
          "Button: Valider la remise (primary)",
          "Button: Annuler (secondary)",
          "Button: Réinitialiser (ghost)"
        ]
      }
    ]
  },
  "mockData": {
    "count": 3,
    "description": "3 remises de caisse : 1 sans écart (monnaie seule), 1 avec écart monnaie (50 EUR manquants), 1 multi-types avec écart produits (2 articles manquants). Inclure stocks articles fictifs (10-50 unités), devises session (EUR, USD, GBP), et 2 PV comptables générés."
  },
  "dependencies": {
    "stores": [
      "useSessionStore",
      "useDeviseStore",
      "useArticleStore"
    ],
    "sharedTypes": [
      "MoyenPaiement",
      "DateComptable"
    ],
    "externalApis": [
      "IDE 43 - Récupération titre membre",
      "IDE 142 - Devise update session WS",
      "IDE 149 - Calcul stock produit WS"
    ]
  }
}
```