Review the generated code against the original specification.

Produce a JSON report:
```json
{
  "programId": 0,
  "programName": "",
  "coveragePct": 0,
  "rulesImplemented": 0,
  "rulesTotal": 0,
  "missingRules": [
    "rule descriptions not implemented"
  ],
  "recommendations": [
    "improvement suggestions"
  ]
}
```

Check:
1. Every business rule from the contract is implemented in the store
2. Every table from the contract has corresponding entity types
3. Every API endpoint is wired to the store
4. UI layout matches the spec description
5. Error handling is present for all actions

CONTRACT RULES:
[
  {
    "id": "RM-001",
    "description": "Condition: Param VIL open sessions [N] egale 'O'",
    "condition": "Param VIL open sessions [N]='O'",
    "variables": [
      "FA"
    ],
    "status": "IMPL",
    "targetFile": "adh-web/src/stores/saisieContenuCaisseStore.ts",
    "gapNotes": ""
  }
]

SPEC EXCERPT:
﻿# ADH IDE 121 - Gestion caisse

> **Analyse**: Phases 1-4 2026-02-07 03:50 -> 03:03 (23h12min) | Assemblage 03:03
> **Pipeline**: V7.2 Enrichi
> **Structure**: 4 onglets (Resume | Ecrans | Donnees | Connexions)

<!-- TAB:Resume -->

## 1. FICHE D'IDENTITE

| Attribut | Valeur |
|----------|--------|
| Projet | ADH |
| IDE Position | 121 |
| Nom Programme | Gestion caisse |
| Fichier source | `Prg_121.xml` |
| Dossier IDE | Caisse |
| Taches | 32 (2 ecrans visibles) |
| Tables modifiees | 4 |
| Programmes appeles | 18 |
| Complexite | **MOYENNE** (score 48/100) |

## 2. DESCRIPTION FONCTIONNELLE

**Gestion caisse** (Public Name : `Gestion_Caisse_142`) est l'ecran principal de gestion du point de vente Club Med (ID ecran CA0142). Ce programme MDI orchestre toutes les operations de caisse : ouverture et fermeture de session, approvisionnement en especes et produits, remise au coffre, consultation d'historique et reimpression de tickets. Il comporte 32 taches et modifie 4 tables liees aux sessions. Le programme est accessible depuis [Menu caisse GM - scroll (IDE 163)](ADH-IDE-163.md) et [Fermeture Sessions (IDE 281)](ADH-IDE-281.md).

### Initialisation et parametrage

Au demarrage, le programme charge les parametres de caisse depuis la table `parametres_caisse` (table 697) via les taches 121.1 et 121.3 (8 + 12 lignes). 121.2 "Controle COFFRE2" (33 lignes) verifie l'integrite des donnees du coffre dans `sessions_coffre2` (caisse_session_coffre2) en appelant [Controle fermeture caisse WS (IDE 155)](ADH-IDE-155.md) et [Verif session caisse ouverte2 (IDE 156)](ADH-IDE-156.md). 121.4 lit la date comptable dans `date_comptable___dat` (table 70) pour s'assurer que la journee comptable est valide. 121.5 "Lecture session" (31 lignes) lit la table `histo_sessions_caisse` (caisse_session) pour determiner l'etat courant de la session (ouverte, fermee, en cloture) et appelle [Controles - Integrite dates (IDE 48)](ADH-IDE-48.md).

<details>
<summary>5 taches : 121.1, 121.2, 121.3, 121.4, 121.5</summary>

- **121.1** - Parametres caisse (8 lignes, lit parametres_caisse)
- **121.2** - Controle COFFRE2 (33 lignes, lit sessions_coffre2)
- **121.3** - Parametres caisse (12 lignes, lit parametres_caisse)
- **121.4** - Date comptable (4 lignes, lit date_comptable___dat)
- **121.5** - Lecture session (31 lignes, lit histo_sessions_caisse)

</details>

### Ecran de pilotage

La tache 121.6 "Pilotage" (128 lignes, ecran SDI 939x178 DLU) est l'ecran principal visible par l'operateur (Gestion de la caisse). Il affiche l'etat de la caisse avec les montants courants et propose un menu d'actions : ouvrir/fermer la session, realiser des apports ou remises, consulter l'historique. Cet ecran appelle [Calcul concurrence sessions (IDE 116)](ADH-IDE-116.md) (12 fois) pour detecter les sessions paralleles, [Recuperation du titre (IDE 43)](ADH-IDE-43.md) pour le nom de l'operateur, et [Raisons utilisation ADH (IDE 231)](ADH-IDE-231.md) pour le contexte fonctionnel. 121.6.12 "Browse - Concurrence sessions" (6 lignes, ecran) affiche la liste des sessions concurrentes dans `concurrence_sessions` (caisse_concurrences) pour alerter si plusieurs postes sont ouverts simultanement.

<details>
<summary>2 taches : 121.6, 121.6.12</summary>

- **121.6** - Pilotage (128 lignes, lit table 740, **[ECRAN]**)
- **121.6.12** - Browse - Concurrence sessions (6 lignes, ecrit concurrence_sessions, **[ECRAN]**)

</details>

### Ouverture de session

L'ouverture de session est geree par la sous-tache 121.6.2 (59 lignes) qui verifie d'abord qu'aucune cloture n'est en cours (121.6.2.1 lit `reseau_cloture___rec`, table 23), puis controle la coherence des stocks monnaie et produit (121.6.2.2, 13 lignes, lit table 198). La tache 121.6.2.3 "Creation histo session" (10 lignes) ecrit un nouvel enregistrement dans `histo_sessions_caisse` (caisse_session) en mode Write, et 121.6.2.3.1 cree l'enregistrement coffre2 correspondant dans `sessions_coffre2` (caisse_session_coffre2). 121.6.2.4 initialise la table temporaire de saisie des devises `saisie_approvisionnement` (caisse_saisie_appro_dev) pour le comptage initial des especes. Le programme delegue le processus complet d'ouverture a [Ouverture caisse (IDE 122)](ADH-IDE-122.md) et l'initialisation des devises a [Init devise session WS (IDE 141)](ADH-IDE-141.md).

<details>
<summary>5 taches : 121.6.2, 121.6.2.1, 121.6.2.2, 121.6.2.3, 121.6.2.4</summary>

- **121.6.2** - Ouverture caisse (59 lignes, orchestrateur)
- **121.6.2.1** - Cloture en cours (5 lignes, lit reseau_cloture___rec)
- **121.6.2.2** - Controle monnaie/produit (13 lignes, lit table 198)
- **121.6.2.3** - Creation histo session (10 lignes, ecrit histo_sessions_caisse)
- **121.6.2.4** - init tempo saisie dev (14 lignes, lit saisie_approvisionnement)

</details>

### Approvisionnement et remise au coffre

Ce domaine gere les mouvements de fonds entre la caisse et le coffre. La tache 121.6.4 "Apport coffre" (17 lignes) declenche un approvisionnement en especes depui

GENERATED FILES:

--- types/gestionCaisse.ts ---
import type { ApiResponse } from "@/services/api/apiClient";

export type SessionStatut = "ouverte" | "fermee" | "cloture_en_cours" | "suspendue";
export type MouvementType = "apport_coffre" | "remise_coffre" | "apport_produit" | "retrait_produit";
export type DeviseCode = string;

export interface SessionCaisse {
  sessionId: number;
  dateOuverture: string;
  dateFermeture: string | null;
  operateurId: number;
  operateurNom: string;
  statut: SessionStatut;
  montantOuverture: number;
  montantFermeture: number | null;
  ecart: number | null;
}

export interface ParametresCaisse {
  caisseId: number;
  seuilAlerte: number;
  deviseLocale: string;
  impressionAuto: boolean;
}

export interface SessionCoffre {
  sessionId: number;
  montantCoffre: number;
  integrite: boolean;
}

export interface MouvementCaisse {
  mouvementId: number;
  sessionId: number;
  type: MouvementType;
  deviseCode: string;
  montant: number;
  dateHeure: string;
}

export interface SessionConcurrente {
  sessionId: number;
  posteId: string;
  operateurNom: string;
  dateOuverture: string;
}

export interface DateComptable {
  date: string;
  valide: boolean;
}

export interface ApportCoffreRequest {
  montant: number;
  deviseCode: string;
}

export interface ApportProduitRequest {
  produitId: number;
  quantite: number;
}

export interface RemiseCoffreRequest {
  montant: number;
  deviseCode: string;
}

export interface HistoriqueQueryParams {
  dateDebut?: string;
  dateFin?: string;
  operateurId?: number;
}

export type OuvrirSessionResponse = ApiResponse<SessionCaisse>;
export type FermerSessionResponse = ApiResponse<SessionCaisse>;
export type ApportCoffreResponse = ApiResponse<MouvementCaisse>;
export type ApportProduitResponse = ApiResponse<MouvementCaisse>;
export type RemiseCoffreResponse = ApiResponse<MouvementCaisse>;
export type ParametresCaisseResponse = ApiResponse<ParametresCaisse>;
export

--- stores/gestionCaisseStore.ts ---
import { create } from 'zustand';
import type {
  SessionCaisse,
  ParametresCaisse,
  SessionConcurrente,
  MouvementCaisse,
  DateComptable,
  GestionCaisseState,
} from '@/types/gestionCaisse';
import { apiClient } from '@/services/api/apiClient';
import type { ApiResponse } from '@/services/api/apiClient';
import { useDataSourceStore } from '@/stores/dataSourceStore';

const MOCK_PARAMETRES: ParametresCaisse = {
  caisseId: 1,
  seuilAlerte: 100,
  deviseLocale: 'EUR',
  impressionAuto: true,
};

const MOCK_SESSION_ACTIVE: SessionCaisse = {
  sessionId: 1001,
  dateOuverture: '2026-02-22T08:00:00',
  dateFermeture: null,
  operateurId: 5,
  operateurNom: 'DUPONT Jean',
  statut: 'ouverte',
  montantOuverture: 500,
  montantFermeture: null,
  ecart: null,
};

const MOCK_SESSIONS_CONCURRENTES: SessionConcurrente[] = [
  {
    sessionId: 1002,
    posteId: 'CAISSE-02',
    operateurNom: 'MARTIN Sophie',
    dateOuverture: '2026-02-22T08:15:00',
  },
  {
    sessionId: 1003,
    posteId: 'CAISSE-03',
    operateurNom: 'DURAND Pierre',
    dateOuverture: '2026-02-22T08:30:00',
  },
];

const MOCK_MOUVEMENTS: MouvementCaisse[] = [
  {
    mouvementId: 1,
    sessionId: 1001,
    type: 'apport_coffre',
    deviseCode: 'EUR',
    montant: 200,
    dateHeure: '2026-02-22T09:00:00',
  },
  {
    mouvementId: 2,
    sessionId: 1001,
    type: 'apport_coffre',
    deviseCode: 'USD',
    montant: 150,
    dateHeure: '2026-02-22T10:30:00',
  },
  {
    mouvementId: 3,
    sessionId: 1001,
    type: 'remise_coffre',
    deviseCode: 'EUR',
    montant: 100,
    dateHeure: '2026-02-22T14:00:00',
  },
];

const MOCK_HISTORIQUE: SessionCaisse[] = [
  {
    sessionId: 995,
    dateOuverture: '2026-02-21T08:00:00',
    dateFermeture: '2026-02-21T18:00:00',
    operateurId: 5,
    operateurNom: 'DUPONT Jean',
    statut: 'fermee',
    montantOuverture: 500,
    montantFermeture: 1245.5,
    ecart: 2.5,
  },
  {
    sessionId: 996,
    dateOuverture: '2026-02-20T08:00:00',
    dateFer

--- services/api/endpoints-gestionCaisse.ts ---
import { apiClient, type ApiResponse } from '@/services/api/apiClient';
import type {
  SessionCaisse,
  ParametresCaisse,
  DateComptable,
  SessionConcurrente,
  MouvementCaisse,
  HistoriqueQueryParams,
} from '@/types/gestionCaisse';

export const gestionCaisseApi = {
  getParametres: () =>
    apiClient.get<ApiResponse<ParametresCaisse>>(
      '/api/gestion-caisse/parametres',
    ),

  getSessionActive: () =>
    apiClient.get<ApiResponse<SessionCaisse | null>>(
      '/api/gestion-caisse/session-active',
    ),

  getDateComptable: () =>
    apiClient.get<ApiResponse<DateComptable>>(
      '/api/gestion-caisse/date-comptable',
    ),

  getSessionsConcurrentes: () =>
    apiClient.get<ApiResponse<SessionConcurrente[]>>(
      '/api/gestion-caisse/sessions-concurrentes',
    ),

  ouvrirSession: () =>
    apiClient.post<ApiResponse<SessionCaisse>>(
      '/api/gestion-caisse/ouvrir-session',
      {},
    ),

  apportCoffre: (montant: number, deviseCode: string) =>
    apiClient.post<ApiResponse<MouvementCaisse>>(
      `/api/gestion-caisse/apport-coffre?montant=${montant}&deviseCode=${encodeURIComponent(deviseCode)}`,
      {},
    ),

  apportProduit: (produitId: number, quantite: number) =>
    apiClient.post<ApiResponse<MouvementCaisse>>(
      `/api/gestion-caisse/apport-produit?produitId=${produitId}&quantite=${quantite}`,
      {},
    ),

  remiseCoffre: (montant: number, deviseCode: string) =>
    apiClient.post<ApiResponse<MouvementCaisse>>(
      `/api/gestion-caisse/remise-coffre?montant=${montant}&deviseCode=${encodeURIComponent(deviseCode)}`,
      {},
    ),

  fermerSession: () =>
    apiClient.post<ApiResponse<SessionCaisse>>(
      '/api/gestion-caisse/fermer-session',
      {},
    ),

  getHistorique: (params: HistoriqueQueryParams) => {
    const query = new URLSearchParams();
    if (params.dateDebut) query.append('dateDebut', params.dateDebut);
    if (params.dateFin) query.append('dateFin', params.dateFin);
    if (params.operateurId)


--- pages/GestionCaissePage.tsx ---
import { useCallback, useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import { ScreenLayout } from '@/components/layout';
import { Button } from '@/components/ui';
import { useGestionCaisseStore } from '@/stores/gestionCaisseStore';
import { useAuthStore } from '@/stores';
import {
  HeaderSectionPanel,
  MontantsSectionPanel,
  AlertesSectionPanel,
  ActionsSectionPanel,
  MouvementsSectionPanel,
} from '@/components/caisse/gestionCaisse';

export function GestionCaissePage() {
  const navigate = useNavigate();
  const user = useAuthStore((s) => s.user);

  const sessionActive = useGestionCaisseStore((s) => s.sessionActive);
  const parametres = useGestionCaisseStore((s) => s.parametres);
  const mouvements = useGestionCaisseStore((s) => s.mouvements);
  const isLoading = useGestionCaisseStore((s) => s.isLoading);
  const error = useGestionCaisseStore((s) => s.error);

  const chargerParametres = useGestionCaisseStore((s) => s.chargerParametres);
  const chargerSessionActive = useGestionCaisseStore((s) => s.chargerSessionActive);
  const verifierDateComptable = useGestionCaisseStore((s) => s.verifierDateComptable);
  const controlerCoffre = useGestionCaisseStore((s) => s.controlerCoffre);
  const detecterSessionsConcurrentes = useGestionCaisseStore((s) => s.detecterSessionsConcurrentes);
  const ouvrirSession = useGestionCaisseStore((s) => s.ouvrirSession);
  const apportCoffre = useGestionCaisseStore((s) => s.apportCoffre);
  const apportProduit = useGestionCaisseStore((s) => s.apportProduit);
  const remiseCoffre = useGestionCaisseStore((s) => s.remiseCoffre);
  const fermerSession = useGestionCaisseStore((s) => s.fermerSession);
  const reimprimerTickets = useGestionCaisseStore((s) => s.reimprimerTickets);
  const consulterHistorique = useGestionCaisseStore((s) => s.consulterHistorique);
  const setError = useGestionCaisseStore((s) => s.setError);
  const reset = useGestionCaisseStore((s) =

--- components/caisse/gestionCaisse/ActionsSectionPanel.tsx ---
import { Button } from "@/components/ui";
import { cn } from "@/lib/utils";

interface ActionsSectionPanelProps {
  className?: string;
  onOuvrirSession?: () => void;
  onFermerSession?: () => void;
  onApportCoffre?: () => void;
  onApportProduit?: () => void;
  onRemiseCoffre?: () => void;
  onHistorique?: () => void;
  onConsultation?: () => void;
  onReimprimer?: () => void;
  disabled?: boolean;
}

export const ActionsSectionPanel = ({
  className,
  onOuvrirSession,
  onFermerSession,
  onApportCoffre,
  onApportProduit,
  onRemiseCoffre,
  onHistorique,
  onConsultation,
  onReimprimer,
  disabled = false,
}: ActionsSectionPanelProps) => {
  return (
    <div className={cn("flex flex-col gap-3", className)}>
      <div className="grid grid-cols-2 gap-3">
        <Button
          onClick={onOuvrirSession}
          disabled={disabled}
          variant="primary"
          className="w-full"
        >
          Ouvrir Session
        </Button>
        <Button
          onClick={onFermerSession}
          disabled={disabled}
          variant="primary"
          className="w-full"
        >
          Fermer Session
        </Button>
      </div>

      <div className="grid grid-cols-3 gap-2">
        <Button
          onClick={onApportCoffre}
          disabled={disabled}
          variant="secondary"
          size="sm"
          className="w-full"
        >
          Apport Coffre
        </Button>
        <Button
          onClick={onApportProduit}
          disabled={disabled}
          variant="secondary"
          size="sm"
          className="w-full"
        >
          Apport Produit
        </Button>
        <Button
          onClick={onRemiseCoffre}
          disabled={disabled}
          variant="secondary"
          size="sm"
          className="w-full"
        >
          Remise Coffre
        </Button>
      </div>

      <div className="grid grid-cols-3 gap-2">
        <Button
          onClick={onHistorique}
          disabled={disabled}
    

--- components/caisse/gestionCaisse/AlertesSectionPanel.tsx ---
import { useState, useEffect } from "react";
import { cn } from "@/lib/utils";
import { useDataSourceStore } from "@/stores/dataSourceStore";
import { apiClient } from "@/services/api/apiClient";
import type { ApiResponse } from "@/services/api/apiClient";

interface AlertesSectionPanelProps {
  className?: string;
}

interface SessionConcurrente {
  sessionId: number;
  operateurNom: string;
  dateOuverture: string;
  terminal: string;
  montantCoffre: number;
}

interface IntegriteCoffre {
  statut: "OK" | "ALERTE" | "ERREUR";
  message: string;
  ecartDetecte: number;
  dernierControle: string;
}

export const AlertesSectionPanel = ({ className }: AlertesSectionPanelProps) => {
  const [sessionsConcurrentes, setSessionsConcurrentes] = useState<SessionConcurrente[]>([]);
  const [integriteCoffre, setIntegriteCoffre] = useState<IntegriteCoffre | null>(null);
  const [isLoading, setIsLoading] = useState(true);
  const isRealApi = useDataSourceStore((state) => state.isRealApi);

  useEffect(() => {
    const fetchAlertes = async () => {
      setIsLoading(true);
      try {
        if (isRealApi) {
          const [sessionsResp, integriteResp] = await Promise.all([
            apiClient.get<ApiResponse<SessionConcurrente[]>>("/api/sessions/concurrentes"),
            apiClient.get<ApiResponse<IntegriteCoffre>>("/api/coffre/integrite"),
          ]);
          if (sessionsResp.success) setSessionsConcurrentes(sessionsResp.data);
          if (integriteResp.success) setIntegriteCoffre(integriteResp.data);
        } else {
          setSessionsConcurrentes([
            {
              sessionId: 1042,
              operateurNom: "MARTIN Sophie",
              dateOuverture: "2026-02-22T08:30:00",
              terminal: "CAISSE-02",
              montantCoffre: 2500.0,
            },
          ]);
          setIntegriteCoffre({
            statut: "ALERTE",
            message: "Écart détecté sur devise USD",
            ecartDetecte: 15.5,
            dernierControle:

--- components/caisse/gestionCaisse/HeaderSectionPanel.tsx ---
import { cn } from "@/lib/utils";

interface HeaderSectionPanelProps {
  className?: string;
  operateurNom?: string;
  dateComptable?: string;
  sessionStatut?: string;
}

export const HeaderSectionPanel = ({
  className,
  operateurNom = "",
  dateComptable = "",
  sessionStatut = "Fermée",
}: HeaderSectionPanelProps) => {
  const getStatutColor = (statut: string) => {
    switch (statut.toLowerCase()) {
      case "ouverte":
        return "text-green-600 bg-green-50";
      case "fermée":
        return "text-red-600 bg-red-50";
      case "suspendue":
        return "text-orange-600 bg-orange-50";
      default:
        return "text-gray-600 bg-gray-50";
    }
  };

  return (
    <div className={cn("border border-gray-300 bg-gray-50 p-4", className)}>
      <div className="grid grid-cols-3 gap-4">
        <div className="flex flex-col">
          <span className="text-xs font-semibold text-gray-600 uppercase">
            Opérateur
          </span>
          <span className="mt-1 text-sm font-medium text-gray-900">
            {operateurNom || "—"}
          </span>
        </div>

        <div className="flex flex-col">
          <span className="text-xs font-semibold text-gray-600 uppercase">
            Date comptable
          </span>
          <span className="mt-1 text-sm font-medium text-gray-900">
            {dateComptable || "—"}
          </span>
        </div>

        <div className="flex flex-col">
          <span className="text-xs font-semibold text-gray-600 uppercase">
            Statut session
          </span>
          <span
            className={cn(
              "mt-1 inline-flex items-center self-start rounded-full px-2.5 py-0.5 text-xs font-semibold",
              getStatutColor(sessionStatut)
            )}
          >
            {sessionStatut}
          </span>
        </div>
      </div>
    </div>
  );
};

--- components/caisse/gestionCaisse/MontantsSectionPanel.tsx ---
import { cn } from "@/lib/utils";

interface MontantsSectionPanelProps {
  className?: string;
  montantOuverture: number;
  montantActuel: number;
  montantFermeture: number;
  ecart: number;
}

export const MontantsSectionPanel = ({
  className,
  montantOuverture,
  montantActuel,
  montantFermeture,
  ecart,
}: MontantsSectionPanelProps) => {
  const formatCurrency = (value: number) => {
    return new Intl.NumberFormat("fr-FR", {
      style: "currency",
      currency: "EUR",
      minimumFractionDigits: 2,
    }).format(value);
  };

  const isEcartPositive = ecart >= 0;

  return (
    <div className={cn("space-y-4 rounded-lg border border-gray-200 bg-white p-6", className)}>
      <h3 className="text-lg font-semibold text-gray-900">Montants</h3>
      
      <div className="grid grid-cols-2 gap-4">
        <div className="space-y-1">
          <label className="text-sm font-medium text-gray-600">Montant Ouverture</label>
          <div className="text-xl font-semibold text-gray-900">
            {formatCurrency(montantOuverture)}
          </div>
        </div>

        <div className="space-y-1">
          <label className="text-sm font-medium text-gray-600">Montant Actuel</label>
          <div className="text-xl font-semibold text-blue-600">
            {formatCurrency(montantActuel)}
          </div>
        </div>

        <div className="space-y-1">
          <label className="text-sm font-medium text-gray-600">Montant Fermeture</label>
          <div className="text-xl font-semibold text-gray-900">
            {formatCurrency(montantFermeture)}
          </div>
        </div>

        <div className="space-y-1">
          <label className="text-sm font-medium text-gray-600">Écart</label>
          <div
            className={cn(
              "text-xl font-semibold",
              isEcartPositive ? "text-green-600" : "text-red-600"
            )}
          >
            {isEcartPositive ? "+" : ""}{formatCurrency(ecart)}
          </div>
        </di

--- components/caisse/gestionCaisse/MouvementsSectionPanel.tsx ---
import type { FC } from 'react';
import { useState, useEffect } from 'react';
import { DataGrid } from '@/components/data/DataGrid';
import { useDataSourceStore } from '@/stores/dataSourceStore';
import { apiClient } from '@/services/api/apiClient';
import type { ApiResponse } from '@/services/api/apiClient';
import { cn } from '@/lib/utils';

interface MouvementsSectionPanelProps {
  className?: string;
}

interface MouvementRow {
  id: string;
  date: string;
  type: string;
  montant: number;
  devise: string;
  reference: string;
  description: string;
}

const MOCK_MOUVEMENTS: MouvementRow[] = [
  {
    id: '1',
    date: '2026-02-22 09:15',
    type: 'Ouverture',
    montant: 5000.00,
    devise: 'EUR',
    reference: 'OUV-001',
    description: 'Ouverture de caisse'
  },
  {
    id: '2',
    date: '2026-02-22 10:30',
    type: 'Vente',
    montant: 150.00,
    devise: 'EUR',
    reference: 'VTE-042',
    description: 'Vente Gift Pass'
  },
  {
    id: '3',
    date: '2026-02-22 11:45',
    type: 'Change',
    montant: 200.00,
    devise: 'USD',
    reference: 'CHG-018',
    description: 'Change devise USD->EUR'
  },
  {
    id: '4',
    date: '2026-02-22 14:20',
    type: 'Depot',
    montant: 1000.00,
    devise: 'EUR',
    reference: 'DEP-005',
    description: 'Depot garantie'
  }
];

export const MouvementsSectionPanel: FC<MouvementsSectionPanelProps> = ({ className }) => {
  const [mouvements, setMouvements] = useState<MouvementRow[]>([]);
  const [loading, setLoading] = useState(true);
  const isRealApi = useDataSourceStore((state) => state.isRealApi);

  useEffect(() => {
    const fetchMouvements = async () => {
      setLoading(true);
      try {
        if (isRealApi) {
          const response = await apiClient.get<ApiResponse<MouvementRow[]>>('/api/caisse/mouvements');
          if (response.data.success && response.data.data) {
            setMouvements(response.data.data);