Après analyse approfondie du code généré contre la spécification et le contrat, voici le rapport JSON de couverture :

```json
{
  "programId": 121,
  "programName": "Gestion caisse",
  "coveragePct": 45,
  "rulesImplemented": 9,
  "rulesTotal": 20,
  "missingRules": [
    "RM-001: Condition Param VIL open sessions [N]='O' - Variable FA non présente dans le store",
    "Vérification intégrité coffre2 (121.2 Controle COFFRE2) - Pas d'appel aux programmes IDE 155/156",
    "Init devise session (121.6.2.4) - Table temporaire saisie_approvisionnement non gérée",
    "Contrôle stock monnaie/produit (121.6.2.2) - Table 198 non référencée",
    "Consultation ventes GP/RC - Programmes 237/250 non appelés",
    "Réimpression ticket (121.6.7.2.3) - Programme IDE 229 PRINT_TICKET non appelé",
    "Calcul concurrence sessions - Programme IDE 116 (12 appels) non présent",
    "Récupération titre opérateur - Programme IDE 43 non appelé",
    "Raisons utilisation ADH - Programme IDE 231 non appelé",
    "Gestion fermeture session complète - Programme IDE 131 non orchestré",
    "Les 18 programmes externes appelés dans la spec ne sont pas tous intégrés"
  ],
  "recommendations": [
    "CRITIQUE: Ajouter la variable FA dans le state pour gérer la condition RM-001 (Param VIL open sessions)",
    "HAUTE: Implémenter l'appel à controlerCoffre() avec les programmes IDE 155/156 pour vérifier l'intégrité",
    "HAUTE: Créer une table temporaire saisie_approvisionnement dans le store pour l'initialisation devises",
    "HAUTE: Ajouter la vérification stock monnaie/produit (table 198) avant ouverture session",
    "MOYENNE: Intégrer les appels aux programmes de vente GP (237) et RC (250) dans consulterSession",
    "MOYENNE: Connecter le bouton 'Réimprimer' au programme IDE 229 PRINT_TICKET",
    "MOYENNE: Implémenter detecterSessionsConcurrentes() avec appel au programme IDE 116 (12 fois selon spec)",
    "BASSE: Ajouter l'appel au programme IDE 43 pour récupérer le nom de l'opérateur",
    "BASSE: Ajouter l'appel au programme IDE 231 pour le contexte fonctionnel",
    "CRITIQUE: Créer l'orchestration complète de fermeture avec IDE 131 (voir ADH-IDE-131.md)",
    "UI: L'écran MDI principal (CA0142, 939x178 DLU) est bien implémenté avec les sections Header, Montants, Alertes, Actions, Mouvements",
    "BONNE PRATIQUE: Store Zustand bien structuré avec mock/API, gestion erreurs présente",
    "AMÉLIORATION: Ajouter les 18 programmes appelés dans les endpoints API backend correspondants"
  ]
}
```

**Synthèse** :

✅ **Couverture acceptable (45%)** pour un premier scaffold :
- Store Zustand complet avec mock/API
- Types TypeScript exhaustifs
- UI avec 5 sections (Header, Montants, Alertes, Actions, Mouvements)
- Actions de base : ouvrir/fermer session, apport/remise coffre, historique

❌ **Manques critiques** :
- **RM-001** : La variable FA (Param VIL open sessions) n'est pas présente dans le state
- **Intégrité coffre** : Pas d'appel aux programmes IDE 155/156 (contrôle fermeture/session ouverte)
- **Init devises** : Table temporaire saisie_approvisionnement non gérée (nécessaire pour comptage initial)
- **Programmes externes** : Les 18 programmes appelés (116, 43, 155, 156, 229, 231, 237, 250, etc.) ne sont pas orchestrés

**Prochaines étapes** :
1. Implémenter RM-001 en ajoutant la variable FA et la condition dans ouvrirSession
2. Créer les endpoints API manquants pour les programmes externes (IDE 116, 155, 156, 229, etc.)
3. Ajouter la table temporaire saisie_approvisionnement dans le store
4. Connecter l'UI aux nouveaux endpoints