/**
 * Generates API client module from a CodegenModel.
 * Follows adh-web pattern: import apiClient, export typed methods.
 */
export const generateApi = (model) => {
    const lines = [];
    const { domain, domainPascal } = model;
    lines.push(`// API client for ${domainPascal} (IDE ${model.programId})`);
    lines.push(`// Auto-generated by Migration Factory v8 - edit after generation`);
    lines.push('');
    lines.push(`import { apiClient } from '@/services/api/client';`);
    lines.push(`import type { ApiResponse } from '@/services/api/types';`);
    lines.push('');
    if (model.apiCalls.length === 0) {
        lines.push(`// No callees defined in contract - add endpoints as needed`);
        lines.push(`export const ${domain}Api = {};`);
        lines.push('');
        return lines.join('\n');
    }
    lines.push(`export const ${domain}Api = {`);
    for (let i = 0; i < model.apiCalls.length; i++) {
        const call = model.apiCalls[i];
        const responseName = call.name.replace(/^call/, '');
        const paramSig = call.method === 'GET' ? '' : 'data: unknown';
        lines.push(`  // Callee: ${call.calleeName} (IDE ${call.calleeId})`);
        if (call.method === 'GET') {
            lines.push(`  ${call.name}: () =>`);
            lines.push(`    apiClient.get<ApiResponse<unknown>>('${call.path}'),`);
        }
        else {
            lines.push(`  ${call.name}: (${paramSig}) =>`);
            lines.push(`    apiClient.${call.method.toLowerCase()}<ApiResponse<unknown>>('${call.path}', data),`);
        }
        if (i < model.apiCalls.length - 1)
            lines.push('');
    }
    lines.push('};');
    lines.push('');
    return lines.join('\n');
};
//# sourceMappingURL=api-generator.js.map