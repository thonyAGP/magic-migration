{
  "domain": "sessionDetail",
  "domainPascal": "SessionDetail",
  "complexity": "LOW",
  "entities": [
    {
      "name": "SessionDetailLog",
      "fields": [
        {
          "name": "societe",
          "type": "string",
          "source": "histo_sessions_caisse_detail.societe",
          "nullable": false
        },
        {
          "name": "deviseLocale",
          "type": "string",
          "source": "histo_sessions_caisse_detail.devise_locale",
          "nullable": false
        },
        {
          "name": "uniBi",
          "type": "string",
          "source": "histo_sessions_caisse_detail.uni_bi",
          "nullable": false
        },
        {
          "name": "chronoSession",
          "type": "number",
          "source": "histo_sessions_caisse_detail.chrono_session",
          "nullable": false
        },
        {
          "name": "quand",
          "type": "string",
          "source": "histo_sessions_caisse_detail.quand",
          "nullable": false
        },
        {
          "name": "quoi",
          "type": "string",
          "source": "histo_sessions_caisse_detail.quoi",
          "nullable": false
        },
        {
          "name": "type",
          "type": "string",
          "source": "histo_sessions_caisse_detail.type",
          "nullable": false
        },
        {
          "name": "montant",
          "type": "number",
          "source": "histo_sessions_caisse_detail.montant",
          "nullable": true
        },
        {
          "name": "montantMonnaie",
          "type": "number",
          "source": "histo_sessions_caisse_detail.montant_monnaie",
          "nullable": true
        },
        {
          "name": "montantProduits",
          "type": "number",
          "source": "histo_sessions_caisse_detail.montant_produits",
          "nullable": true
        },
        {
          "name": "montantCartes",
          "type": "number",
          "source": "histo_sessions_caisse_detail.montant_cartes",
          "nullable": true
        },
        {
          "name": "montantCheques",
          "type": "number",
          "source": "histo_sessions_caisse_detail.montant_cheques",
          "nullable": true
        },
        {
          "name": "montantOd",
          "type": "number",
          "source": "histo_sessions_caisse_detail.montant_od",
          "nullable": true
        },
        {
          "name": "nbreDevises",
          "type": "number",
          "source": "histo_sessions_caisse_detail.nbre_devises",
          "nullable": true
        },
        {
          "name": "commentaireEcart",
          "type": "string",
          "source": "histo_sessions_caisse_detail.commentaire_ecart",
          "nullable": true
        },
        {
          "name": "ouvertureAuto",
          "type": "string",
          "source": "histo_sessions_caisse_detail.ouverture_auto",
          "nullable": true
        }
      ]
    }
  ],
  "stateFields": [],
  "actions": [
    {
      "name": "logSessionDetail",
      "params": [
        "societe: string",
        "deviseLocale: string",
        "uniBi: string",
        "chronoSession: number",
        "quand: 'O'|'F'",
        "quoi: string",
        "type: 'E'|'V'|'I'",
        "montant: number",
        "montantMonnaie: number",
        "montantProduits: number",
        "montantCartes: number",
        "montantCheques: number",
        "montantOd: number",
        "nbreDevises: number",
        "commentaireEcart: string",
        "commentaireEcartDevise: string",
        "ouvertureAuto: boolean"
      ],
      "businessRules": [
        "RM-001: If type='E' → write to histo_sessions_caisse_devise",
        "RM-002: If nbreDevises>0 → write devise detail rows",
        "RM-003: If type='V' → write to histo_sessions_caisse_article",
        "RM-004: If type='V' AND montantProduits>0 → write article detail",
        "RM-005: If quand='O' AND type='I' → mark as initial opening",
        "RM-006: ouvertureAuto → set to 'O' else empty string"
      ],
      "returns": "Promise<void>"
    }
  ],
  "apiEndpoints": [
    {
      "method": "POST",
      "path": "/api/session-detail/log",
      "queryParams": [],
      "response": "void"
    }
  ],
  "uiLayout": {
    "type": "backend-only",
    "sections": []
  },
  "mockData": {
    "count": 0,
    "description": "Backend-only WS - no UI mock data required"
  },
  "dependencies": {
    "stores": [],
    "sharedTypes": [
      "SessionDetailType"
    ],
    "externalApis": []
  }
}