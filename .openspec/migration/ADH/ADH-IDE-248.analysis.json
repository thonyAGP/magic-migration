{
  "domain": "choixPyr",
  "domainPascal": "ChoixPyr",
  "complexity": "MEDIUM",
  "entities": [
    {
      "name": "Hebergement",
      "fields": [
        {
          "name": "societe",
          "type": "number",
          "source": "hebergement.societe",
          "nullable": false
        },
        {
          "name": "compte",
          "type": "number",
          "source": "hebergement.compte",
          "nullable": false
        },
        {
          "name": "filiation",
          "type": "number",
          "source": "hebergement.filiation",
          "nullable": false
        },
        {
          "name": "chambre",
          "type": "string",
          "source": "hebergement.chambre",
          "nullable": false
        },
        {
          "name": "dateDebut",
          "type": "Date",
          "source": "hebergement.date_debut",
          "nullable": false
        },
        {
          "name": "dateFin",
          "type": "Date",
          "source": "hebergement.date_fin",
          "nullable": true
        },
        {
          "name": "statut",
          "type": "string",
          "source": "hebergement.statut",
          "nullable": false
        }
      ]
    },
    {
      "name": "ClientGm",
      "fields": [
        {
          "name": "societe",
          "type": "number",
          "source": "client_gm.societe",
          "nullable": false
        },
        {
          "name": "compte",
          "type": "number",
          "source": "client_gm.compte",
          "nullable": false
        },
        {
          "name": "filiation",
          "type": "number",
          "source": "client_gm.filiation",
          "nullable": false
        },
        {
          "name": "nom",
          "type": "string",
          "source": "client_gm.nom",
          "nullable": false
        },
        {
          "name": "prenom",
          "type": "string",
          "source": "client_gm.prenom",
          "nullable": true
        }
      ]
    }
  ],
  "stateFields": [
    {
      "name": "hebergements",
      "type": "Hebergement[]",
      "default": "[]"
    },
    {
      "name": "selectedHebergement",
      "type": "Hebergement | null",
      "default": "null"
    },
    {
      "name": "clientInfo",
      "type": "ClientGm | null",
      "default": "null"
    },
    {
      "name": "isLoading",
      "type": "boolean",
      "default": "false"
    },
    {
      "name": "error",
      "type": "string | null",
      "default": "null"
    }
  ],
  "actions": [
    {
      "name": "fetchHebergements",
      "params": [
        "societe: number",
        "compte: number",
        "filiation: number"
      ],
      "businessRules": [
        "RM-001: Charger tous les hebergements actifs pour le client GM specifie",
        "RM-002: Filtrer les chambres valides (date debut <= aujourd'hui, date fin >= aujourd'hui ou null)",
        "Joindre avec client_gm pour recuperer les informations du client"
      ],
      "returns": "Promise<void>"
    },
    {
      "name": "selectChambre",
      "params": [
        "hebergement: Hebergement"
      ],
      "businessRules": [
        "RM-001: Valider que l'hebergement selectionne appartient au client",
        "RM-002: Mettre a jour la table hebergement pour marquer la chambre selectionnee",
        "Retourner la chambre selectionnee au programme appelant"
      ],
      "returns": "Promise<void>"
    },
    {
      "name": "cancelSelection",
      "params": [],
      "businessRules": [
        "RM-004: Annuler la selection et retourner sans mise a jour",
        "Fermer le dialogue de selection"
      ],
      "returns": "Promise<void>"
    }
  ],
  "apiEndpoints": [
    {
      "method": "GET",
      "path": "/api/choixPyr/hebergements",
      "queryParams": [
        "societe",
        "compte",
        "filiation"
      ],
      "response": "Hebergement[]"
    },
    {
      "method": "POST",
      "path": "/api/choixPyr/select",
      "queryParams": [],
      "response": "{ success: boolean; selectedChambre: string }"
    }
  ],
  "uiLayout": {
    "type": "modal-dialog",
    "sections": [
      {
        "name": "header",
        "controls": [
          "Client info display (nom, prenom)",
          "Message: 'Veuillez choisir la chambre pour le paiement PYR'"
        ]
      },
      {
        "name": "chambresGrid",
        "controls": [
          "DataGrid with columns: Chambre, Date debut, Date fin, Statut",
          "Single selection mode",
          "Sort by chambre number"
        ]
      },
      {
        "name": "actions",
        "controls": [
          "Button: Valider (primary, enabled when selection)",
          "Button: Annuler (secondary)"
        ]
      }
    ]
  },
  "mockData": {
    "count": 3,
    "description": "3 hebergements actifs pour un client GM dans differentes chambres (ex: 101, 203, 305) avec dates chevauchantes pour tester le cas multi-chambres"
  },
  "dependencies": {
    "stores": [
      "useDataSourceStore"
    ],
    "sharedTypes": [
      "Hebergement",
      "ClientGm"
    ],
    "externalApis": []
  }
}